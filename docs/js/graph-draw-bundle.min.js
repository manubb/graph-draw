!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).graphDraw=t()}}(function(){return function t(a,i,e){function r(s,o){if(!i[s]){if(!a[s]){var h="function"==typeof require&&require;if(!o&&h)return h(s,!0);if(n)return n(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=i[s]={exports:{}};a[s][0].call(u.exports,function(t){var i=a[s][1][t];return r(i||t)},u,u.exports,t,a,i,e)}return i[s].exports}for(var n="function"==typeof require&&require,s=0;s<e.length;s++)r(e[s]);return r}({1:[function(t,a,i){"use strict";var e;function r(t,a){return t.b===a.b&&t.a===a.a}function n(t,a){return t.b<a.b||t.b===a.b&&t.a<=a.a}function s(t,a,i){var e=a.b-t.b,r=i.b-a.b;return 0<e+r?e<r?a.a-t.a+e/(e+r)*(t.a-i.a):a.a-i.a+r/(e+r)*(i.a-t.a):0}function o(t,a,i){var e=a.b-t.b,r=i.b-a.b;return 0<e+r?(a.a-i.a)*e+(a.a-t.a)*r:0}function h(t,a){return t.a<a.a||t.a===a.a&&t.b<=a.b}function c(t,a,i){var e=a.a-t.a,r=i.a-a.a;return 0<e+r?e<r?a.b-t.b+e/(e+r)*(t.b-i.b):a.b-i.b+r/(e+r)*(i.b-t.b):0}function u(t,a,i){var e=a.a-t.a,r=i.a-a.a;return 0<e+r?(a.b-i.b)*e+(a.b-t.b)*r:0}function b(t,a,i,e){return(t=0>t?0:t)<=(i=0>i?0:i)?0===i?(a+e)/2:a+t/(t+i)*(e-a):e+i/(t+i)*(a-e)}function f(t){var a=v(t.b);return E(a,t.c),E(a.b,t.c),T(a,t.a),a}function l(t,a){var i=!1,e=!1;t!==a&&(a.a!==t.a&&(e=!0,G(a.a,t.a)),a.d!==t.d&&(i=!0,L(a.d,t.d)),g(a,t),e||(E(a,t.a),t.a.c=t),i||(T(a,t.d),t.d.a=t))}function d(t){var a=t.b,i=!1;t.d!==t.b.d&&(i=!0,L(t.d,t.b.d)),t.c===t?G(t.a,null):(t.b.d.a=J(t),t.a.c=t.c,g(t,J(t)),i||T(t,t.d)),a.c===a?(G(a.a,null),L(a.d,null)):(t.d.a=J(a),a.a.c=a.c,g(a,J(a))),S(t)}function _(t){var a=v(t),i=a.b;return g(a,t.e),a.a=t.b.a,E(i,a.a),a.d=i.d=t.d,a=a.b,g(t.b,J(t.b)),g(t.b,a),t.b.a=a.a,a.b.a.c=a.b,a.b.d=t.b.d,a.f=t.f,a.b.f=t.b.f,a}function p(t,a){var i=!1,e=v(t),r=e.b;return a.d!==t.d&&(i=!0,L(a.d,t.d)),g(e,t.e),g(r,a),e.a=t.b.a,r.a=a.a,e.d=r.d=t.d,t.d.a=r,i||T(e,t.d),e}function v(t){var a=new Z,i=new Z,e=t.b.h;return i.h=e,e.b.h=a,a.h=t,t.b.h=i,a.b=i,a.c=a,a.e=i,i.b=a,i.c=i,i.e=a}function g(t,a){var i=t.c,e=a.c;i.b.e=a,e.b.e=t,t.c=e,a.c=i}function E(t,a){var i=a.f,e=new $(a,i);i.e=e,a.f=e,i=e.c=t;do{i.a=e,i=i.c}while(i!==t)}function T(t,a){var i=a.d,e=new Q(a,i);i.b=e,a.d=e,e.a=t,e.c=a.c,i=t;do{i.d=e,i=i.e}while(i!==t)}function S(t){var a=t.h;t=t.b.h,a.b.h=t,t.b.h=a}function G(t,a){var i=t.c,e=i;do{e.a=a,e=e.c}while(e!==i);i=t.f,(e=t.e).f=i,i.e=e}function L(t,a){var i=t.a,e=i;do{e.d=a,e=e.e}while(e!==i);i=t.d,(e=t.b).d=i,i.b=e}function y(t){var a=0;return Math.abs(t[1])>Math.abs(t[0])&&(a=1),Math.abs(t[2])>Math.abs(t[a])&&(a=2),a}var w=4e150;function N(t,a){t.f+=a.f,t.b.f+=a.b.f}function m(t,a,i){return t=t.a,a=a.a,i=i.a,a.b.a===t?i.b.a===t?n(a.a,i.a)?0>=o(i.b.a,a.a,i.a):0<=o(a.b.a,i.a,a.a):0>=o(i.b.a,t,i.a):i.b.a===t?0<=o(a.b.a,t,a.a):(a=s(a.b.a,t,a.a))>=(t=s(i.b.a,t,i.a))}function I(t){t.a.i=null;var a=t.e;a.a.c=a.c,a.c.a=a.a,t.e=null}function U(t,a){d(t.a),t.c=!1,t.a=a,a.i=t}function O(t){var a=t.a.a;do{t=ct(t)}while(t.a.a===a);return t.c&&(U(t,a=p(ht(t).a.b,t.a.e)),t=ct(t)),t}function k(t,a,i){var e=new ot;return e.a=i,e.e=Y(t.f,a.e,e),i.i=e}function x(t,a){switch(t.s){case 100130:return 0!=(1&a);case 100131:return 0!==a;case 100132:return 0<a;case 100133:return 0>a;case 100134:return 2<=a||-2>=a}return!1}function A(t){var a=t.a,i=a.d;i.c=t.d,i.a=a,I(t)}function D(t,a,i){for(t=a,a=a.a;t!==i;){t.c=!1;var e=ht(t),r=e.a;if(r.a!==a.a){if(!e.c){A(t);break}U(e,r=p(a.c.b,r.b))}a.c!==r&&(l(J(r),r),l(a,r)),A(t),a=e.a,t=e}return a}function M(t,a,i,e,r,n){var s=!0;do{k(t,a,i.b),i=i.c}while(i!==e);for(null===r&&(r=ht(a).a.b.c);(i=(e=ht(a)).a.b).a===r.a;)i.c!==r&&(l(J(i),i),l(J(r),i)),e.f=a.f-i.f,e.d=x(t,e.f),a.b=!0,!s&&B(t,a)&&(N(i,r),I(a),d(r)),s=!1,a=e,r=i;a.b=!0,n&&V(t,a)}function R(t,a,i,e,r){var n=[a.g[0],a.g[1],a.g[2]];a.d=null,a.d=t.o&&t.o(n,i,e,t.c)||null,null===a.d&&(r?t.n||(K(t,100156),t.n=!0):a.d=i[0])}function C(t,a,i){var e=[null,null,null,null];e[0]=a.a.d,e[1]=i.a.d,R(t,a.a,e,[.5,.5,0,0],!1),l(a,i)}function P(t,a,i,e,r){var n=Math.abs(a.b-t.b)+Math.abs(a.a-t.a),s=Math.abs(i.b-t.b)+Math.abs(i.a-t.a),o=r+1;e[r]=.5*s/(n+s),e[o]=.5*n/(n+s),t.g[0]+=e[r]*a.g[0]+e[o]*i.g[0],t.g[1]+=e[r]*a.g[1]+e[o]*i.g[1],t.g[2]+=e[r]*a.g[2]+e[o]*i.g[2]}function B(t,a){var i=ht(a),e=a.a,s=i.a;if(n(e.a,s.a)){if(0<o(s.b.a,e.a,s.a))return!1;if(r(e.a,s.a)){if(e.a!==s.a){i=t.e;var h=e.a.h;if(0<=h){var c=(i=i.b).d,u=i.e,b=i.c,f=b[h];c[f]=c[i.a],b[c[f]]=f,f<=--i.a&&(1>=f?nt(i,f):n(u[c[f>>1]],u[c[f]])?nt(i,f):st(i,f)),u[h]=null,b[h]=i.b,i.b=h}else for(i.c[-(h+1)]=null;0<i.a&&null===i.c[i.d[i.a-1]];)--i.a;C(t,J(s),e)}}else _(s.b),l(e,J(s)),a.b=i.b=!0}else{if(0>o(e.b.a,s.a,e.a))return!1;ct(a).b=a.b=!0,_(e.b),l(J(s),e)}return!0}function j(t,a){var i=ht(a),e=a.a,f=i.a,d=e.a,p=f.a,v=e.b.a,g=f.b.a,E=new $;if(o(v,t.a,d),o(g,t.a,p),d===p||Math.min(d.a,v.a)>Math.max(p.a,g.a))return!1;if(n(d,p)){if(0<o(g,d,p))return!1}else if(0>o(v,p,d))return!1;var T,S,G=v,L=d,y=g,w=p;if(n(G,L)||(T=G,G=L,L=T),n(y,w)||(T=y,y=w,w=T),n(G,y)||(T=G,G=y,y=T,T=L,L=w,w=T),n(y,L)?n(L,w)?(0>(T=s(G,y,L))+(S=s(y,L,w))&&(T=-T,S=-S),E.b=b(T,y.b,S,L.b)):(0>(T=o(G,y,L))+(S=-o(G,w,L))&&(T=-T,S=-S),E.b=b(T,y.b,S,w.b)):E.b=(y.b+L.b)/2,h(G,L)||(T=G,G=L,L=T),h(y,w)||(T=y,y=w,w=T),h(G,y)||(T=G,G=y,y=T,T=L,L=w,w=T),h(y,L)?h(L,w)?(0>(T=c(G,y,L))+(S=c(y,L,w))&&(T=-T,S=-S),E.a=b(T,y.a,S,L.a)):(0>(T=u(G,y,L))+(S=-u(G,w,L))&&(T=-T,S=-S),E.a=b(T,y.a,S,w.a)):E.a=(y.a+L.a)/2,n(E,t.a)&&(E.b=t.a.b,E.a=t.a.a),n(G=n(d,p)?d:p,E)&&(E.b=G.b,E.a=G.a),r(E,d)||r(E,p))return B(t,a),!1;if(!r(v,t.a)&&0<=o(v,t.a,E)||!r(g,t.a)&&0>=o(g,t.a,E)){if(g===t.a)return _(e.b),l(f.b,e),a=O(a),e=ht(a).a,D(t,ht(a),i),M(t,a,J(e),e,e,!0),!0;if(v===t.a){_(f.b),l(e.e,J(f)),p=(d=i=a).a.b.a;do{d=ct(d)}while(d.a.b.a===p);return d=ht(a=d).a.b.c,i.a=J(f),M(t,a,(f=D(t,i,null)).c,e.b.c,d,!0),!0}return 0<=o(v,t.a,E)&&(ct(a).b=a.b=!0,_(e.b),e.a.b=t.a.b,e.a.a=t.a.a),0>=o(g,t.a,E)&&(a.b=i.b=!0,_(f.b),f.a.b=t.a.b,f.a.a=t.a.a),!1}return _(e.b),_(f.b),l(J(f),e),e.a.b=E.b,e.a.a=E.a,e.a.h=tt(t.e,e.a),e=e.a,f=[0,0,0,0],E=[d.d,v.d,p.d,g.d],e.g[0]=e.g[1]=e.g[2]=0,P(e,d,v,f,0),P(e,p,g,f,2),R(t,e,E,f,!0),ct(a).b=a.b=i.b=!0,!1}function V(t,a){for(var i=ht(a);;){for(;i.b;)a=i,i=ht(i);if(!a.b&&(i=a,null===(a=ct(a))||!a.b))break;a.b=!1;var e,r=a.a,s=i.a;if(e=r.b.a!==s.b.a)t:{var h=ht(e=a),c=e.a,u=h.a,b=void 0;if(n(c.b.a,u.b.a)){if(0>o(c.b.a,u.b.a,c.a)){e=!1;break t}ct(e).b=e.b=!0,b=_(c),l(u.b,b),b.d.c=e.d}else{if(0<o(u.b.a,c.b.a,u.a)){e=!1;break t}e.b=h.b=!0,b=_(u),l(c.e,u.b),b.b.d.c=e.d}e=!0}if(e&&(i.c?(I(i),d(s),s=(i=ht(a)).a):a.c&&(I(a),d(r),r=(a=ct(i)).a)),r.a!==s.a)if(r.b.a===s.b.a||a.c||i.c||r.b.a!==t.a&&s.b.a!==t.a)B(t,a);else if(j(t,a))break;r.a===s.a&&r.b.a===s.b.a&&(N(s,r),I(a),d(r),a=ct(i))}}function q(t,a){t.a=a;for(var i=a.c;null===i.i;)if(i=i.c,i===a.c){i=t;var e=a;(c=new ot).a=e.c.b;var s=(b=i.f).a;do{s=s.a}while(null!==s.b&&!b.c(b.b,c,s.b));var h=ht(b=s.b),c=b.a;s=h.a;if(0===o(c.b.a,e,c.a))c=b.a,r(c.a,e)||r(c.b.a,e)||(_(c.b),b.c&&(d(c.c),b.c=!1),l(e.c,c),q(i,e));else{var u=n(s.b.a,c.b.a)?b:h;h=void 0;b.d||u.c?(h=u===b?p(e.c.b,c.e):p(s.b.c.b,e.c).b,u.c?U(u,h):(c=i,(b=k(i,b,h)).f=ct(b).f+b.a.f,b.d=x(c,b.f)),q(i,e)):M(i,b,e.c,e.c,null,!0)}return}if(b=(c=ht(i=O(i.i))).a,(c=D(t,c,null)).c===b){c=(b=c).c,s=ht(i),h=i.a,u=s.a;var b,f=!1;h.b.a!==u.b.a&&j(t,i),r(h.a,t.a)&&(l(J(c),h),c=ht(i=O(i)).a,D(t,ht(i),s),f=!0),r(u.a,t.a)&&(l(b,J(u)),b=D(t,s,null),f=!0),f?M(t,i,b.c,c,c,!0):(e=n(u.a,h.a)?J(u):h,M(t,i,e=p(b.c.b,e),e.c,e.c,!1),e.b.i.c=!0,V(t,i))}else M(t,i,c.c,b,b,!0)}function W(t,a){var i=new ot,e=f(t.b);e.a.b=w,e.a.a=a,e.b.a.b=-w,e.b.a.a=a,t.a=e.b.a,i.a=e,i.f=0,i.d=!1,i.c=!1,i.h=!0,i.b=!1,e=Y(e=t.f,e.a,i),i.e=e}function Y(t,a,i){do{a=a.c}while(null!==a.b&&!t.c(t.b,a.b,i));return t=new F(i,a.a,a),a.a.c=t,a.a=t}function F(t,a,i){this.b=t||null,this.a=a||this,this.c=i||this}function X(){this.d=z,this.p=this.b=this.q=null,this.j=[0,0,0],this.s=100130,this.n=!1,this.o=this.a=this.e=this.f=null,this.m=!1,this.c=this.r=this.i=this.k=this.l=this.h=null}var z=0;function H(t,a){if(t.d!==a)for(;t.d!==a;)if(t.d<a)switch(t.d){case z:K(t,100151),t.u(null);break;case 1:K(t,100152),t.t()}else switch(t.d){case 2:K(t,100154),t.v();break;case 1:K(t,100153),t.w()}}function K(t,a){t.p&&t.p(a,t.c)}function Q(t,a){this.b=t||this,this.d=a||this,this.a=null,this.c=!1}function Z(){this.h=this,this.i=this.d=this.a=this.e=this.c=this.b=null,this.f=0}function J(t){return t.b.e}function $(t,a){this.e=t||this,this.f=a||this,this.d=this.c=null,this.g=[0,0,0],this.h=this.a=this.b=0}function tt(t,a){if(t.e){var i,e=t.b,r=++e.a;return 2*r>e.f&&(e.f*=2,e.c=it(e.c,e.f+1)),0===e.b?i=r:(i=e.b,e.b=e.c[e.b]),e.e[i]=a,e.c[i]=r,e.d[r]=i,e.h&&st(e,r),i}return e=t.a++,t.c[e]=a,-(e+1)}function at(t){if(0===t.a)return rt(t.b);var a=t.c[t.d[t.a-1]];if(0!==t.b.a&&n(et(t.b),a))return rt(t.b);do{--t.a}while(0<t.a&&null===t.c[t.d[t.a-1]]);return a}function it(t,a){for(var i=Array(a),e=0;e<t.length;e++)i[e]=t[e];for(;e<a;e++)i[e]=0;return i}function et(t){return t.e[t.d[1]]}function rt(t){var a=t.d,i=t.e,e=t.c,r=a[1],n=i[r];return 0<t.a&&(a[1]=a[t.a],e[a[1]]=1,i[r]=null,e[r]=t.b,t.b=r,0<--t.a&&nt(t,1)),n}function nt(t,a){for(var i=t.d,e=t.e,r=t.c,s=a,o=i[s];;){var h=s<<1;h<t.a&&n(e[i[h+1]],e[i[h]])&&(h+=1);var c=i[h];if(h>t.a||n(e[o],e[c])){i[s]=o,r[o]=s;break}i[s]=c,r[c]=s,s=h}}function st(t,a){for(var i=t.d,e=t.e,r=t.c,s=a,o=i[s];;){var h=s>>1,c=i[h];if(0===h||n(e[c],e[o])){i[s]=o,r[o]=s;break}i[s]=c,r[c]=s,s=h}}function ot(){this.e=this.a=null,this.f=0,this.c=this.b=this.h=this.d=!1}function ht(t){return t.e.c.b}function ct(t){return t.e.a.b}(e=X.prototype).x=function(){H(this,z)},e.B=function(t,a){switch(t){case 100142:return;case 100140:switch(a){case 100130:case 100131:case 100132:case 100133:case 100134:return void(this.s=a)}break;case 100141:return void(this.m=!!a);default:return void K(this,100900)}K(this,100901)},e.y=function(t){switch(t){case 100142:return 0;case 100140:return this.s;case 100141:return this.m;default:K(this,100900)}return!1},e.A=function(t,a,i){this.j[0]=t,this.j[1]=a,this.j[2]=i},e.z=function(t,a){var i=a||null;switch(t){case 100100:case 100106:this.h=i;break;case 100104:case 100110:this.l=i;break;case 100101:case 100107:this.k=i;break;case 100102:case 100108:this.i=i;break;case 100103:case 100109:this.p=i;break;case 100105:case 100111:this.o=i;break;case 100112:this.r=i;break;default:K(this,100900)}},e.C=function(t,a){var i=!1,e=[0,0,0];H(this,2);for(var r=0;3>r;++r){var n=t[r];-1e150>n&&(n=-1e150,i=!0),1e150<n&&(n=1e150,i=!0),e[r]=n}i&&K(this,100155),null===(i=this.q)?l(i=f(this.b),i.b):(_(i),i=i.e),i.a.d=a,i.a.g[0]=e[0],i.a.g[1]=e[1],i.a.g[2]=e[2],i.f=1,i.b.f=-1,this.q=i},e.u=function(t){H(this,z),this.d=1,this.b=new function(){this.c=new $,this.a=new Q,this.b=new Z,this.d=new Z,this.b.b=this.d,this.d.b=this.b},this.c=t},e.t=function(){H(this,1),this.d=2,this.q=null},e.v=function(){H(this,2),this.d=1},e.w=function(){H(this,1),this.d=z;var t,a,i=!1,e=[b=this.j[0],s=this.j[1],c=this.j[2]];if(0===b&&0===s&&0===c){for(var s=[-2e150,-2e150,-2e150],h=[2e150,2e150,2e150],c=[],u=[],b=(i=this.b.c).e;b!==i;b=b.e)for(var f=0;3>f;++f){var l=b.g[f];l<h[f]&&(h[f]=l,u[f]=b),l>s[f]&&(s[f]=l,c[f]=b)}if(b=0,s[1]-h[1]>s[0]-h[0]&&(b=1),s[2]-h[2]>s[b]-h[b]&&(b=2),h[b]>=s[b])e[0]=0,e[1]=0,e[2]=1;else{for(s=0,h=u[b],c=c[b],u=[0,0,0],h=[h.g[0]-c.g[0],h.g[1]-c.g[1],h.g[2]-c.g[2]],f=[0,0,0],b=i.e;b!==i;b=b.e)f[0]=b.g[0]-c.g[0],f[1]=b.g[1]-c.g[1],f[2]=b.g[2]-c.g[2],u[0]=h[1]*f[2]-h[2]*f[1],u[1]=h[2]*f[0]-h[0]*f[2],u[2]=h[0]*f[1]-h[1]*f[0],l=u[0]*u[0]+u[1]*u[1]+u[2]*u[2],l>s&&(s=l,e[0]=u[0],e[1]=u[1],e[2]=u[2]);0>=s&&(e[0]=e[1]=e[2]=0,e[y(h)]=1)}i=!0}for(u=y(e),b=this.b.c,s=(u+1)%3,c=(u+2)%3,u=0<e[u]?1:-1,e=b.e;e!==b;e=e.e)e.b=e.g[s],e.a=u*e.g[c];if(i){for(e=0,b=(i=this.b.a).b;b!==i;b=b.b)if(s=b.a,!(0>=s.f))do{e+=(s.a.b-s.b.a.b)*(s.a.a+s.b.a.a),s=s.e}while(s!==b.a);if(0>e)for(e=this.b.c,i=e.e;i!==e;i=i.e)i.a=-i.a}for(this.n=!1,b=(e=this.b.b).h;b!==e;b=i)i=b.h,s=b.e,r(b.a,b.b.a)&&b.e.e!==b&&(C(this,s,b),d(b),b=s,s=b.e),s.e===b&&(s!==b&&(s!==i&&s!==i.b||(i=i.h),d(s)),b!==i&&b!==i.b||(i=i.h),d(b));for(this.e=e=new function(){this.c=[],this.d=null,this.a=0,this.e=!1,this.b=new function(){this.d=it([0],33),this.e=[null,null],this.c=[0,0],this.a=0,this.f=32,this.b=0,this.h=!1,this.d[1]=1}},b=(i=this.b.c).e;b!==i;b=b.e)b.h=tt(e,b);for(function(t){t.d=[];for(var a=0;a<t.a;a++)t.d[a]=a;t.d.sort((i=t.c,function(t,a){return n(i[t],i[a])?1:-1})),t.e=!0,function(t){for(var a=t.a;1<=a;--a)nt(t,a);t.h=!0}(t.b);var i}(e),this.f=new function(t){this.a=new F,this.b=t,this.c=m}(this),W(this,-w),W(this,w);null!==(e=at(this.e));){for(;;){t:if(b=this.e,0===b.a)i=et(b.b);else if(i=b.c[b.d[b.a-1]],0!==b.b.a&&(b=et(b.b),n(b,i))){i=b;break t}if(null===i||!r(i,e))break;i=at(this.e),C(this,e.c,i.c)}q(this,e)}for(this.a=this.f.a.a.b.a.a,e=0;null!==(i=this.f.a.a.b);)i.h||++e,I(i);for(this.f=null,(e=this.e).b=null,e.d=null,this.e=e.c=null,b=(e=this.b).a.b;b!==e.a;b=i)i=b.b,b=b.a,b.e.e===b&&(N(b.c,b),d(b));if(!this.n){if(e=this.b,this.m)for(b=e.b.h;b!==e.b;b=i)i=b.h,b.b.d.c!==b.d.c?b.f=b.d.c?1:-1:d(b);else for(b=e.a.b;b!==e.a;b=i)if(i=b.b,b.c){for(b=b.a;n(b.b.a,b.a);b=b.c.b);for(;n(b.a,b.b.a);b=b.e);for(s=b.c.b,c=void 0;b.e!==s;)if(n(b.b.a,s.a)){for(;s.e!==b&&(n((a=s.e).b.a,a.a)||0>=o(s.a,s.b.a,s.e.b.a));)c=p(s.e,s),s=c.b;s=s.c.b}else{for(;s.e!==b&&(n((t=b.c.b).a,t.b.a)||0<=o(b.b.a,b.a,b.c.b.a));)c=p(b,b.c.b),b=c.b;b=b.e}for(;s.e.e!==b;)c=p(s.e,s),s=c.b}if(this.h||this.i||this.k||this.l)if(this.m){for(e=this.b,i=e.a.b;i!==e.a;i=i.b)if(i.c){this.h&&this.h(2,this.c),b=i.a;do{this.k&&this.k(b.a.d,this.c),b=b.e}while(b!==i.a);this.i&&this.i(this.c)}}else{for(e=this.b,i=!!this.l,b=!1,s=-1,c=e.a.d;c!==e.a;c=c.d)if(c.c){b||(this.h&&this.h(4,this.c),b=!0),u=c.a;do{i&&(h=u.b.d.c?0:1,s!==h&&(s=h,this.l&&this.l(!!s,this.c))),this.k&&this.k(u.a.d,this.c),u=u.e}while(u!==c.a)}b&&this.i&&this.i(this.c)}if(this.r){for(b=(e=this.b).a.b;b!==e.a;b=i)if(i=b.b,!b.c){c=(s=b.a).e,u=void 0;do{u=c,c=u.e,u.d=null,null===u.b.d&&(u.c===u?G(u.a,null):(u.a.c=u.c,g(u,J(u))),h=u.b,h.c===h?G(h.a,null):(h.a.c=h.c,g(h,J(h))),S(u))}while(u!==s);s=b.d,(b=b.b).d=s,s.b=b}return this.r(this.b),void(this.c=this.b=null)}}this.b=this.c=null},this.libtess={GluTesselator:X,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901,GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111}},X.prototype.gluDeleteTess=X.prototype.x,X.prototype.gluTessProperty=X.prototype.B,X.prototype.gluGetTessProperty=X.prototype.y,X.prototype.gluTessNormal=X.prototype.A,X.prototype.gluTessCallback=X.prototype.z,X.prototype.gluTessVertex=X.prototype.C,X.prototype.gluTessBeginPolygon=X.prototype.u,X.prototype.gluTessBeginContour=X.prototype.t,X.prototype.gluTessEndContour=X.prototype.v,X.prototype.gluTessEndPolygon=X.prototype.w,void 0!==a&&(a.exports=this.libtess)},{}],2:[function(t,a,i){"use strict";var e=new(t("./tessellator"));function r(){this.list=[],this.hash=Object.create(null)}function n(t,a){var i=s(t),e=s(a);i!==e&&(i.rank<e.rank?i.parent=e:(e.parent=i,i.rank===e.rank&&(i.rank+=1)))}function s(t){return t.parent!==t&&(t.parent=s(t.parent)),t.parent}function o(t,a,i){for(var e,r,n,s,o,h,u,b=(r=t,s=(n=a)[0]-r[0],o=n[1]-r[1],s*s+o*o),f=0;f<4;f++){if((h=c(t,a,t,i[f]))<=0)u=-1;else{if(!(h>=b))return!1;u=1}if(0===f)e=u;else if(u!==e)return!1}return!0}function h(t,a){return!(o(t[0],t[1],a)||o(t[1],t[2],a)||o(a[0],a[1],t)||o(a[1],a[2],t))}function c(t,a,i,e){return(a[0]-t[0])*(e[0]-i[0])+(a[1]-t[1])*(e[1]-i[1])}function u(t,a,i,e){var r=a[0]-t[0],n=a[1]-t[1],s=e[0]-i[0],o=e[1]-i[1],h=((a[0]-i[0])*n-r*(a[1]-i[1]))/(s*n-r*o);return[i[0]+h*s,i[1]+h*o]}r.prototype.push=function(t){this.hash[t]||(this.hash[t]=!0,this.list.push(t))},r.prototype.pop=function(){if(this.list.length){var t=this.list.pop();return delete this.hash[t],t}return null},a.exports=function(t,a,i,o){var b=a/2;o=Math.max(Math.PI,o||2*Math.PI);var f=t.vertices.map(function(t){return{coords:t,neighList:[]}}),l=t.edges.map(function(t,a){var i,e,r,n,s,o,h,c=t[0],u=t[1],l=f[c],d=f[u],_=(i=l.coords,e=d.coords,r=b,n=e[0]-i[0],s=e[1]-i[1],o=Math.sqrt(n*n+s*s),h=Math.acos(n/o),s<0&&(h*=-1),{angle:h,norm:o,dir:[n,s],ortho:[-r*s/o,r*n/o]});l.neighList.push({to:u,angle:_.angle,dir:_.dir,ortho:_.ortho,index:a}),d.neighList.push({to:c,angle:_.angle<=0?_.angle+Math.PI:_.angle-Math.PI,dir:[-_.dir[0],-_.dir[1]],ortho:[-_.ortho[0],-_.ortho[1]],index:a});var p={rank:0,edge:t,points:{}};return p.points[u]={},p.points[c]={},p.parent=p,p}),d=[];f.forEach(function(t,a){var i=t.coords,e=t.neighList;e.sort(function(t,a){return t.angle-a.angle});var r=e.length;if(1===r){var n=e[0],s=[i[0]+n.ortho[0],i[1]+n.ortho[1]],h=[i[0]-n.ortho[0],i[1]-n.ortho[1]],u=l[n.index].points;u[a].first_vertex=n.index,u[a].last_vertex=n.index,u[a].first=s,u[a].remove_middle_first=!0,u[a].remove_middle_last=!0,u[a].last=h}else e.forEach(function(t,n){var s=n===r-1,h=e[s?0:n+1],u=l[t.index].points,f=l[h.index].points;u[a].first_vertex=h.index,f[a].last_vertex=t.index;var _=[i[0]+t.ortho[0],i[1]+t.ortho[1]],p=[_[0]+t.dir[0],_[1]+t.dir[1]],v=[i[0]-h.ortho[0],i[1]-h.ortho[1]],g=function(t,a,i,e){var r=a[0]-t[0],n=a[1]-t[1],s=e[0]-i[0],o=e[1]-i[1],h=s*n-r*o;if(0===h)return{point:t,valid:!0};var u=((a[0]-i[0])*n-r*(a[1]-i[1]))/h,b=[i[0]+u*s,i[1]+u*o];return u>1||c(a,b,a,t)<0?{point:b,valid:!1}:{point:b,valid:!0}}(_,p,v,[v[0]+h.dir[0],v[1]+h.dir[1]]),E=g.point;if(g.valid){if((s?h.angle+2*Math.PI:h.angle)-t.angle>o){u[a].first=_,f[a].last=v;var T=[E[0]-i[0],E[1]-i[1]],S=1/Math.sqrt(T[0]*T[0]+T[1]*T[1]);u[a].miter_first=f[a].miter_last=[i[0]+b*T[0]*S,i[1]+b*T[1]*S]}else u[a].first=E,f[a].last=E;2===r&&(u[a].remove_middle_first=!0,f[a].remove_middle_last=!0)}else{var G=[E[0]-t.ortho[0],E[1]-t.ortho[1]],L=[E[0]+h.ortho[0],E[1]+h.ortho[1]];d.push({done:[t.index,h.index],todo:[a,t.to,h.to],rectangles:[[_,E,G,i],[v,E,L,i]]}),u[a].first=_,f[a].last=v}})}),l.forEach(function(t){var a=t.edge,i=a[0],e=a[1],r=t.points[i],s=t.points[e],o=f[i].coords,h=f[e].coords,b=t.polygon=[];if(c(r.last,s.first,o,h)<0){var d=r.last_vertex,_=s.first_vertex;n(l[d],l[_]),b.push(u(r.miter_last||o,r.last,s.first,s.miter_first||h))}else b.push(r.last,s.first);s.miter_first&&b.push(s.miter_first),s.remove_middle_first&&s.remove_middle_last||b.push(h),s.miter_last&&b.push(s.miter_last),c(r.first,s.last,o,h)<0?(d=r.first_vertex,_=s.last_vertex,n(l[d],l[_]),b.push(u(r.first,r.miter_first||o,s.miter_last||h,s.last))):b.push(s.last,r.first),r.miter_first&&b.push(r.miter_first),r.remove_middle_first&&r.remove_middle_last||b.push(o),r.miter_last&&b.push(r.miter_last)});var _=Object.create(null);d.forEach(function(t){var a=Object.create(null),i=t.done[0],e=t.done[1],s=l[i],o=l[e];n(s,o),a[i]=!0,a[e]=!0;var c,u=new r;t.todo.forEach(function(t){u.push(t)});for(var b=t.rectangles[0],d=t.rectangles[1];null!==(c=u.pop());)f[c].neighList.forEach(function(t){var i=t.index;if(!a[i]){var e=t.to,r=_[i];if(!r){var o=f[c].coords,p=f[e].coords,v=[o[0]+t.ortho[0],o[1]+t.ortho[1]],g=[p[0]+t.ortho[0],p[1]+t.ortho[1]],E=[p[0]-t.ortho[0],p[1]-t.ortho[1]],T=[o[0]-t.ortho[0],o[1]-t.ortho[1]];r=_[i]=[v,g,E,T]}a[i]=!0,(h(r,b)||h(r,d))&&(n(s,l[i]),u.push(e))}})});var p=[];l.forEach(function(t,a){if(t.rank>0&&t.parent===t)t.union=t.union||[],t.union.push(t.polygon),p.push(a);else if(t.parent===t)i(t.polygon);else{var e=s(t);e.union=e.union||[],e.union.push(t.polygon)}}),e._cb=i,p.forEach(function(t){e.run(l[t].union)}),delete e._cb}},{"./tessellator":3}],3:[function(t,a,i){"use strict";var e;try{e=t("libtess")}catch(t){if(void 0===window.libtess)throw new Error("libtess must be loaded before graph-draw");e=window.libtess}var r=e.GluTesselator,n=e.gluEnum,s=(e.primitiveType,n.GLU_TESS_BOUNDARY_ONLY),o=e.primitiveType.GL_LINE_LOOP;function h(){r.call(this),this.gluTessNormal(0,0,1),this.gluTessProperty(n.GLU_TESS_WINDING_RULE,e.windingRule.GLU_TESS_WINDING_POSITIVE),this.gluTessCallback(n.GLU_TESS_VERTEX_DATA,this._vertex),this.gluTessCallback(n.GLU_TESS_BEGIN,this._begin),this.gluTessCallback(n.GLU_TESS_END,this._end),this.gluTessCallback(n.GLU_TESS_ERROR,this._error),this.gluTessCallback(n.GLU_TESS_COMBINE,this._combine)}h.prototype=Object.create(r.prototype),h.prototype.constructor=h,h.prototype.run=function(t){var a=this;this.gluTessBeginPolygon(),t.forEach(function(t){a.gluTessBeginContour(),t.forEach(function(t){a.gluTessVertex([t[0],t[1],0],t)}),a.gluTessEndContour()}),this.gluTessProperty(s,!0),this._output=[],this.gluTessEndPolygon(),this.gluTessBeginPolygon(),this._output.forEach(function(t){a.gluTessBeginContour(),t.forEach(function(t){a.gluTessVertex([t[0],t[1],0],t)}),a.gluTessEndContour()}),this.gluTessProperty(s,!1),this.gluTessEndPolygon()},h.prototype.clean=function(){this._accu=[],this._output=[]},h.prototype._begin=function(t){this._primitiveType=t,this._accu=[]},h.prototype._vertex=function(t){this._accu.push(t)},h.prototype._error=function(t){console.error("libtess error: "+t)},h.prototype._combine=function(t){return[t[0],t[1]]},h.prototype._end=function(){if(this._primitiveType===o)this._output.push(this._accu);else for(var t=0;t<this._accu.length;t+=3)this._cb([this._accu[t],this._accu[t+1],this._accu[t+2]])},a.exports=h},{libtess:1}]},{},[2])(2)});