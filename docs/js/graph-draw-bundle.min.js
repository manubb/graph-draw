!function(t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).graphDraw=t()}(function(){return function i(r,n,s){function o(a,t){if(!n[a]){if(!r[a]){var e="function"==typeof require&&require;if(!t&&e)return e(a,!0);if(h)return h(a,!0);throw(t=new Error("Cannot find module '"+a+"'")).code="MODULE_NOT_FOUND",t}e=n[a]={exports:{}},r[a][0].call(e.exports,function(t){return o(r[a][1][t]||t)},e,e.exports,i,r,n,s)}return n[a].exports}for(var h="function"==typeof require&&require,t=0;t<s.length;t++)o(s[t]);return o}({1:[function(e,i,b){var t;function p(t,a){return t.b===a.b&&t.a===a.a}function v(t,a){return t.b<a.b||t.b===a.b&&t.a<=a.a}function g(t,a,e){var i=a.b-t.b,r=e.b-a.b;return 0<i+r?i<r?a.a-t.a+i/(i+r)*(t.a-e.a):a.a-e.a+r/(i+r)*(e.a-t.a):0}function E(t,a,e){var i=a.b-t.b,r=e.b-a.b;return 0<i+r?(a.a-e.a)*i+(a.a-t.a)*r:0}function T(t,a){return t.a<a.a||t.a===a.a&&t.b<=a.b}function W(t,a,e){var i=a.a-t.a,r=e.a-a.a;return 0<i+r?i<r?a.b-t.b+i/(i+r)*(t.b-e.b):a.b-e.b+r/(i+r)*(e.b-t.b):0}function Y(t,a,e){var i=a.a-t.a,r=e.a-a.a;return 0<i+r?(a.b-e.b)*i+(a.b-t.b)*r:0}function S(t,a,e,i){return(t=t<0?0:t)<=(e=e<0?0:e)?0===e?(a+i)/2:a+t/(t+e)*(i-a):i+e/(t+e)*(a-i)}function u(t){var a=n(t.b);return r(a,t.c),r(a.b,t.c),s(a,t.a),a}function G(t,a){var e=!1,i=!1;t!==a&&(a.a!==t.a&&(i=!0,m(a.a,t.a)),a.d!==t.d&&(e=!0,o(a.d,t.d)),N(a,t),i||(r(a,t.a),t.a.c=t),e||(s(a,t.d),t.d.a=t))}function _(t){var a=t.b,e=!1;t.d!==t.b.d&&(e=!0,o(t.d,t.b.d)),t.c===t?m(t.a,null):(t.b.d.a=t.b.e,t.a.c=t.c,N(t,t.b.e),e||s(t,t.d)),a.c===a?(m(a.a,null),o(a.d,null)):(t.d.a=a.b.e,a.a.c=a.c,N(a,a.b.e)),F(t)}function L(t){var a=n(t),e=a.b;return N(a,t.e),a.a=t.b.a,r(e,a.a),a.d=e.d=t.d,a=a.b,N(t.b,t.b.b.e),N(t.b,a),t.b.a=a.a,a.b.a.c=a.b,a.b.d=t.b.d,a.f=t.f,a.b.f=t.b.f,a}function y(t,a){var e=!1,i=n(t),r=i.b;return a.d!==t.d&&(e=!0,o(a.d,t.d)),N(i,t.e),N(r,a),i.a=t.b.a,r.a=a.a,i.d=r.d=t.d,t.d.a=r,e||s(i,t.d),i}function n(t){var a=new c,e=new c,i=t.b.h;return(((e.h=i).b.h=a).h=t).b.h=e,a.b=e,((a.c=a).e=e).b=a,(e.c=e).e=a}function N(t,a){var e=t.c,i=a.c;e.b.e=a,(i.b.e=t).c=i,a.c=e}function r(t,a){var e=a.f,i=new C(a,e);for(e.e=i,e=(a.f=i).c=t;e.a=i,(e=e.c)!==t;);}function s(t,a){var e=a.d,i=new et(a,e);for(e.b=i,(a.d=i).a=t,i.c=a.c,e=t;e.d=i,(e=e.e)!==t;);}function F(t){var a=t.h;t=t.b.h,(a.b.h=t).b.h=a}function m(t,a){for(var e=t.c,i=e;i.a=a,(i=i.c)!==e;);((i=t.e).f=e=t.f).e=i}function o(t,a){for(var e=t.a,i=e;i.d=a,(i=i.e)!==e;);((i=t.b).d=e=t.d).b=i}function X(t){var a=0;return Math.abs(t[1])>Math.abs(t[0])&&(a=1),a=Math.abs(t[2])>Math.abs(t[a])?2:a}var I=4e150;function U(t,a){t.f+=a.f,t.b.f+=a.b.f}function f(t,a,e){return t=t.a,a=a.a,e=e.a,a.b.a===t?e.b.a===t?v(a.a,e.a)?E(e.b.a,a.a,e.a)<=0:0<=E(a.b.a,e.a,a.a):E(e.b.a,t,e.a)<=0:e.b.a===t?0<=E(a.b.a,t,a.a):(a=g(a.b.a,t,a.a),(t=g(e.b.a,t,e.a))<=a)}function w(t){t.a.i=null;var a=t.e;a.a.c=a.c,a.c.a=a.a,t.e=null}function O(t,a){_(t.a),t.c=!1,(t.a=a).i=t}function k(t){for(var a=t.a.a;(t=q(t)).a.a===a;);return t.c&&(O(t,a=y(V(t).a.b,t.a.e)),t=q(t)),t}function z(t,a,e){var i=new j;return i.a=e,i.e=d(t.f,a.e,i),e.i=i}function H(t,a){switch(t.s){case 100130:return 0!=(1&a);case 100131:return 0!==a;case 100132:return 0<a;case 100133:return a<0;case 100134:return 2<=a||a<=-2}return!1}function l(t){var a=t.a,e=a.d;e.c=t.d,e.a=a,w(t)}function x(t,a,e){for(a=(t=a).a;t!==e;){t.c=!1;var i=V(t),r=i.a;if(r.a!==a.a){if(!i.c){l(t);break}O(i,r=y(a.c.b,r.b))}a.c!==r&&(G(r.b.e,r),G(a,r)),l(t),a=i.a,t=i}return a}function A(t,a,e,i,r,n){for(var s=!0;z(t,a,e.b),(e=e.c)!==i;);for(null===r&&(r=V(a).a.b.c);(e=(i=V(a)).a.b).a===r.a;)e.c!==r&&(G(e.b.e,e),G(r.b.e,e)),i.f=a.f-e.f,i.d=H(t,i.f),a.b=!0,!s&&M(t,a)&&(U(e,r),w(a),_(r)),s=!1,a=i,r=e;a.b=!0,n&&J(t,a)}function K(t,a,e,i,r){var n=[a.g[0],a.g[1],a.g[2]];a.d=null,a.d=t.o&&t.o(n,e,i,t.c)||null,null===a.d&&(r?t.n||(h(t,100156),t.n=!0):a.d=e[0])}function D(t,a,e){var i=[null,null,null,null];i[0]=a.a.d,i[1]=e.a.d,K(t,a.a,i,[.5,.5,0,0],!1),G(a,e)}function Q(t,a,e,i,r){var n=Math.abs(a.b-t.b)+Math.abs(a.a-t.a),s=Math.abs(e.b-t.b)+Math.abs(e.a-t.a),o=r+1;i[r]=.5*s/(n+s),i[o]=.5*n/(n+s),t.g[0]+=i[r]*a.g[0]+i[o]*e.g[0],t.g[1]+=i[r]*a.g[1]+i[o]*e.g[1],t.g[2]+=i[r]*a.g[2]+i[o]*e.g[2]}function M(t,a){var e=V(a),i=a.a,r=e.a;if(v(i.a,r.a)){if(0<E(r.b.a,i.a,r.a))return;if(p(i.a,r.a)){if(i.a!==r.a){var e=t.e,n=i.a.h;if(0<=n){var s=(e=e.b).d,o=e.e,h=e.c,c=h[n];s[c]=s[e.a],(h[s[c]]=c)<=--e.a&&(c<=1||v(o[s[c>>1]],o[s[c]])?B:bt)(e,c),o[n]=null,h[n]=e.b,e.b=n}else for(e.c[-(n+1)]=null;0<e.a&&null===e.c[e.d[e.a-1]];)--e.a;D(t,r.b.e,i)}}else L(r.b),G(i,r.b.e),a.b=e.b=!0}else{if(E(i.b.a,r.a,i.a)<0)return;q(a).b=a.b=!0,L(i.b),G(r.b.e,i)}return 1}function Z(t,a){var e=V(a),i=a.a,r=e.a,n=i.a,s=r.a,o=i.b.a,h=r.b.a,c=new C;if(E(o,t.a,n),E(h,t.a,s),!(n===s||Math.min(n.a,o.a)>Math.max(s.a,h.a))){if(v(n,s)){if(0<E(h,n,s))return}else if(E(o,s,n)<0)return;var b,u,f=o,l=n,d=h,_=s;if(v(f,l)||(b=f,f=l,l=b),v(d,_)||(b=d,d=_,_=b),v(f,d)||(b=f,f=d,d=b,b=l,l=_,_=b),v(d,l)?v(l,_)?((b=g(f,d,l))+(u=g(d,l,_))<0&&(b=-b,u=-u),c.b=S(b,d.b,u,l.b)):((b=E(f,d,l))+(u=-E(f,_,l))<0&&(b=-b,u=-u),c.b=S(b,d.b,u,_.b)):c.b=(d.b+l.b)/2,T(f,l)||(b=f,f=l,l=b),T(d,_)||(b=d,d=_,_=b),T(f,d)||(b=f,f=d,d=b,b=l,l=_,_=b),T(d,l)?T(l,_)?((b=W(f,d,l))+(u=W(d,l,_))<0&&(b=-b,u=-u),c.a=S(b,d.a,u,l.a)):((b=Y(f,d,l))+(u=-Y(f,_,l))<0&&(b=-b,u=-u),c.a=S(b,d.a,u,_.a)):c.a=(d.a+l.a)/2,v(c,t.a)&&(c.b=t.a.b,c.a=t.a.a),f=v(n,s)?n:s,v(f,c)&&(c.b=f.b,c.a=f.a),p(c,n)||p(c,s))return M(t,a),0;if(!p(o,t.a)&&0<=E(o,t.a,c)||!p(h,t.a)&&E(h,t.a,c)<=0){if(h===t.a)L(i.b),G(r.b,i),i=V(a=k(a)).a,x(t,V(a),e),A(t,a,i.b.e,i,i,!0);else{if(o!==t.a)return 0<=E(o,t.a,c)&&(q(a).b=a.b=!0,L(i.b),i.a.b=t.a.b,i.a.a=t.a.a),void(E(h,t.a,c)<=0&&(a.b=e.b=!0,L(r.b),r.a.b=t.a.b,r.a.a=t.a.a));for(L(r.b),G(i.e,r.b.e),s=(n=e=a).a.b.a;(n=q(n)).a.b.a===s;);n=V(a=n).a.b.c,e.a=r.b.e,A(t,a,(r=x(t,e,null)).c,i.b.c,n,!0)}return 1}L(i.b),L(r.b),G(r.b.e,i),i.a.b=c.b,i.a.a=c.a,i.a.h=nt(t.e,i.a),i=i.a,r=[0,0,0,0],c=[n.d,o.d,s.d,h.d],i.g[0]=i.g[1]=i.g[2]=0,Q(i,n,o,r,0),Q(i,s,h,r,2),K(t,i,c,r,!0),q(a).b=a.b=e.b=!0}}function J(t,a){for(var e=V(a);;){for(;e.b;)e=V(a=e);if(!a.b&&(null===(a=q(e=a))||!a.b))break;a.b=!1;var i=a.a,r=e.a;if(n=i.b.a!==r.b.a)t:{var n,s=V(n=a),o=n.a,h=s.a,c=void 0;if(v(o.b.a,h.b.a)){if(E(o.b.a,h.b.a,o.a)<0){n=!1;break t}q(n).b=n.b=!0,c=L(o),G(h.b,c),c.d.c=n.d}else{if(0<E(h.b.a,o.b.a,h.a)){n=!1;break t}n.b=s.b=!0,c=L(h),G(o.e,h.b),c.b.d.c=n.d}n=!0}if(n&&(e.c?(w(e),_(r),r=(e=V(a)).a):a.c&&(w(a),_(i),i=(a=q(e)).a)),i.a!==r.a)if(i.b.a===r.b.a||a.c||e.c||i.b.a!==t.a&&r.b.a!==t.a)M(t,a);else if(Z(t,a))break;i.a===r.a&&i.b.a===r.b.a&&(U(r,i),w(a),_(i),a=q(e))}}function $(t,a){var e=new j,i=u(t.b);i.a.b=I,i.a.a=a,i.b.a.b=-I,i.b.a.a=a,t.a=i.b.a,e.a=i,e.f=0,e.d=!1,e.c=!1,e.h=!0,e.b=!1,i=d(i=t.f,i.a,e),e.e=i}function tt(t){this.a=new at,this.b=t,this.c=f}function d(t,a,e){for(;null!==(a=a.c).b&&!t.c(t.b,a.b,e););return t=new at(e,a.a,a),a.a.c=t,a.a=t}function at(t,a,e){this.b=t||null,this.a=a||this,this.c=e||this}function a(){this.d=0,this.p=this.b=this.q=null,this.j=[0,0,0],this.s=100130,this.n=!1,this.o=this.a=this.e=this.f=null,this.m=!1,this.c=this.r=this.i=this.k=this.l=this.h=null}function R(t,a){if(t.d!==a)for(;t.d!==a;)if(t.d<a)switch(t.d){case 0:h(t,100151),t.u(null);break;case 1:h(t,100152),t.t()}else switch(t.d){case 2:h(t,100154),t.v();break;case 1:h(t,100153),t.w()}}function h(t,a){t.p&&t.p(a,t.c)}function et(t,a){this.b=t||this,this.d=a||this,this.a=null,this.c=!1}function c(){(this.h=this).i=this.d=this.a=this.e=this.c=this.b=null,this.f=0}function it(){this.c=new C,this.a=new et,this.b=new c,this.d=new c,this.b.b=this.d,this.d.b=this.b}function C(t,a){this.e=t||this,this.f=a||this,this.d=this.c=null,this.g=[0,0,0],this.h=this.a=this.b=0}function rt(){this.c=[],this.d=null,this.a=0,this.e=!1,this.b=new ot}function nt(t,a){var e,i,r;return t.e?(i=++(e=t.b).a,e.f<2*i&&(e.f*=2,e.c=ht(e.c,e.f+1)),0===e.b?r=i:(r=e.b,e.b=e.c[e.b]),e.e[r]=a,e.c[r]=i,e.d[i]=r,e.h&&bt(e,i),r):(e=t.a++,t.c[e]=a,-(e+1))}function st(t){if(0===t.a)return ct(t.b);var a=t.c[t.d[t.a-1]];if(0!==t.b.a&&v(P(t.b),a))return ct(t.b);for(;--t.a,0<t.a&&null===t.c[t.d[t.a-1]];);return a}function ot(){this.d=ht([0],33),this.e=[null,null],this.c=[0,0],this.a=0,this.f=32,this.b=0,this.h=!1,this.d[1]=1}function ht(t,a){for(var e=Array(a),i=0;i<t.length;i++)e[i]=t[i];for(;i<a;i++)e[i]=0;return e}function P(t){return t.e[t.d[1]]}function ct(t){var a=t.d,e=t.e,i=t.c,r=a[1],n=e[r];return 0<t.a&&(a[1]=a[t.a],i[a[1]]=1,e[r]=null,i[r]=t.b,t.b=r,0<--t.a)&&B(t,1),n}function B(t,a){for(var e=t.d,i=t.e,r=t.c,n=a,s=e[n];;){var o=n<<1,h=(o<t.a&&v(i[e[o+1]],i[e[o]])&&(o+=1),e[o]);if(t.a<o||v(i[s],i[h])){r[e[n]=s]=n;break}r[e[n]=h]=n,n=o}}function bt(t,a){for(var e=t.d,i=t.e,r=t.c,n=a,s=e[n];;){var o=n>>1,h=e[o];if(0==o||v(i[h],i[s])){r[e[n]=s]=n;break}r[e[n]=h]=n,n=o}}function j(){this.e=this.a=null,this.f=0,this.c=this.b=this.h=this.d=!1}function V(t){return t.e.c.b}function q(t){return t.e.a.b}(t=a.prototype).x=function(){R(this,0)},t.B=function(t,a){switch(t){case 100142:return;case 100140:switch(a){case 100130:case 100131:case 100132:case 100133:case 100134:return void(this.s=a)}break;case 100141:return void(this.m=!!a);default:return void h(this,100900)}h(this,100901)},t.y=function(t){switch(t){case 100142:return 0;case 100140:return this.s;case 100141:return this.m;default:h(this,100900)}return!1},t.A=function(t,a,e){this.j[0]=t,this.j[1]=a,this.j[2]=e},t.z=function(t,a){var e=a||null;switch(t){case 100100:case 100106:this.h=e;break;case 100104:case 100110:this.l=e;break;case 100101:case 100107:this.k=e;break;case 100102:case 100108:this.i=e;break;case 100103:case 100109:this.p=e;break;case 100105:case 100111:this.o=e;break;case 100112:this.r=e;break;default:h(this,100900)}},t.C=function(t,a){var e=!1,i=[0,0,0];R(this,2);for(var r=0;r<3;++r){var n=t[r];n<-1e150&&(n=-1e150,e=!0),1e150<n&&(n=1e150,e=!0),i[r]=n}e&&h(this,100155),null===(e=this.q)?G(e=u(this.b),e.b):(L(e),e=e.e),e.a.d=a,e.a.g[0]=i[0],e.a.g[1]=i[1],e.a.g[2]=i[2],e.f=1,e.b.f=-1,this.q=e},t.u=function(t){R(this,0),this.d=1,this.b=new it,this.c=t},t.t=function(){R(this,1),this.d=2,this.q=null},t.v=function(){R(this,2),this.d=1},t.w=function(){R(this,1),this.d=0;var t,a,e=this.j[0],i=this.j[1],r=this.j[2],n=!1,s=[e,i,r];if(0===e&&0===i&&0===r){for(var i=[-2e150,-2e150,-2e150],o=[2e150,2e150,2e150],r=[],h=[],e=(n=this.b.c).e;e!==n;e=e.e)for(var c=0;c<3;++c){var b=e.g[c];b<o[c]&&(o[c]=b,h[c]=e),b>i[c]&&(i[c]=b,r[c]=e)}if(i[e=i[e=i[1]-o[1]>i[e=0]-o[0]?1:e]-o[e]<i[2]-o[2]?2:e]<=o[e])s[0]=0,s[1]=0,s[2]=1;else{for(o=h[e],r=r[e],h=[i=0,0,0],o=[o.g[0]-r.g[0],o.g[1]-r.g[1],o.g[2]-r.g[2]],c=[0,0,0],e=n.e;e!==n;e=e.e)c[0]=e.g[0]-r.g[0],c[1]=e.g[1]-r.g[1],c[2]=e.g[2]-r.g[2],h[0]=o[1]*c[2]-o[2]*c[1],h[1]=o[2]*c[0]-o[0]*c[2],h[2]=o[0]*c[1]-o[1]*c[0],i<(b=h[0]*h[0]+h[1]*h[1]+h[2]*h[2])&&(i=b,s[0]=h[0],s[1]=h[1],s[2]=h[2]);i<=0&&(s[0]=s[1]=s[2]=0,s[X(o)]=1)}n=!0}for(h=X(s),e=this.b.c,i=(h+1)%3,r=(h+2)%3,h=0<s[h]?1:-1,s=e.e;s!==e;s=s.e)s.b=s.g[i],s.a=h*s.g[r];if(n){for(s=0,e=(n=this.b.a).b;e!==n;e=e.b)if(!((i=e.a).f<=0))for(;s+=(i.a.b-i.b.a.b)*(i.a.a+i.b.a.a),(i=i.e)!==e.a;);if(s<0)for(n=(s=this.b.c).e;n!==s;n=n.e)n.a=-n.a}for(this.n=!1,s=this.b.b,e=s.h;e!==s;e=n)n=e.h,i=e.e,p(e.a,e.b.a)&&e.e.e!==e&&(D(this,i,e),_(e),i=(e=i).e),i.e===e&&(i!==e&&(i!==n&&i!==n.b||(n=n.h),_(i)),e!==n&&e!==n.b||(n=n.h),_(e));for(this.e=s=new rt,n=this.b.c,e=n.e;e!==n;e=e.e)e.h=nt(s,e);var u=s;u.d=[];for(var f=0;f<u.a;f++)u.d[f]=f;u.d.sort((e=>function(t,a){return v(e[t],e[a])?1:-1})(u.c)),u.e=!0;for(var l=u.b,d=l.a;1<=d;--d)B(l,d);for(l.h=!0,this.f=new tt(this),$(this,-I),$(this,I);null!==(s=st(this.e));){for(;;){t:if(0===(e=this.e).a)n=P(e.b);else if(n=e.c[e.d[e.a-1]],0!==e.b.a&&v(e=P(e.b),n)){n=e;break t}if(null===n||!p(n,s))break;n=st(this.e),D(this,s.c,n.c)}!function t(a,e){for(var i,r=(a.a=e).c;null===r.i;)if((r=r.c)===e.c){var r=a,n=e;(b=new j).a=n.c.b;for(var s=(o=r.f).a;null!==(s=s.a).b&&!o.c(o.b,b,s.b););var o,h,c=V(o=s.b),b=o.a,s=c.a;return void(0===E(b.b.a,n,b.a)?p((b=o.a).a,n)||p(b.b.a,n)||(L(b.b),o.c&&(_(b.c),o.c=!1),G(n.c,b),t(r,n)):(h=v(s.b.a,b.b.a)?o:c,c=void 0,o.d||h.c?(c=h===o?y(n.c.b,b.e):y(s.b.c.b,n.c).b,h.c?O(h,c):((o=z(b=r,o,c)).f=q(o).f+o.a.f,o.d=H(b,o.f)),t(r,n)):A(r,o,n.c,n.c,null,!0)))}o=(b=V(r=k(r.i))).a,(b=x(a,b,null)).c===o?(b=(o=b).c,s=V(r),c=r.a,h=s.a,i=!1,c.b.a!==h.b.a&&Z(a,r),p(c.a,a.a)&&(G(b.b.e,c),b=V(r=k(r)).a,x(a,V(r),s),i=!0),p(h.a,a.a)&&(G(o,h.b.e),o=x(a,s,null),i=!0),i?A(a,r,o.c,b,b,!0):(n=v(h.a,c.a)?h.b.e:c,A(a,r,n=y(o.c.b,n),n.c,n.c,!1),n.b.i.c=!0,J(a,r))):A(a,r,b.c,o,o,!0)}(this,s)}for(this.a=this.f.a.a.b.a.a,s=0;null!==(n=this.f.a.a.b);)n.h||++s,w(n);for(this.f=null,(s=this.e).b=null,s.d=null,this.e=s.c=null,s=this.b,e=s.a.b;e!==s.a;e=n)n=e.b,(e=e.a).e.e===e&&(U(e.c,e),_(e));if(!this.n){if(s=this.b,this.m)for(e=s.b.h;e!==s.b;e=n)n=e.h,e.b.d.c!==e.d.c?e.f=e.d.c?1:-1:_(e);else for(e=s.a.b;e!==s.a;e=n)if(n=e.b,e.c){for(e=e.a;v(e.b.a,e.a);e=e.c.b);for(;v(e.a,e.b.a);e=e.e);for(i=e.c.b,r=void 0;e.e!==i;)if(v(e.b.a,i.a)){for(;i.e!==e&&(v((a=i.e).b.a,a.a)||E(i.a,i.b.a,i.e.b.a)<=0);)i=(r=y(i.e,i)).b;i=i.c.b}else{for(;i.e!==e&&(v((t=e.c.b).a,t.b.a)||0<=E(e.b.a,e.a,e.c.b.a));)e=(r=y(e,e.c.b)).b;e=e.e}for(;i.e.e!==e;)r=y(i.e,i),i=r.b}if(this.h||this.i||this.k||this.l)if(this.m){for(n=(s=this.b).a.b;n!==s.a;n=n.b)if(n.c){for(this.h&&this.h(2,this.c),e=n.a;this.k&&this.k(e.a.d,this.c),(e=e.e)!==n.a;);this.i&&this.i(this.c)}}else{for(s=this.b,n=!!this.l,e=!1,i=-1,r=s.a.d;r!==s.a;r=r.d)if(r.c)for(e||(this.h&&this.h(4,this.c),e=!0),h=r.a;n&&(o=h.b.d.c?0:1,i!==o)&&(i=o,this.l)&&this.l(!!i,this.c),this.k&&this.k(h.a.d,this.c),(h=h.e)!==r.a;);e&&this.i&&this.i(this.c)}if(this.r){for(s=this.b,e=s.a.b;e!==s.a;e=n)if(n=e.b,!e.c){for(r=(i=e.a).e,h=void 0;r=(h=r).e,(h.d=null)===h.b.d&&(h.c===h?m(h.a,null):(h.a.c=h.c,N(h,h.b.e)),(o=h.b).c===o?m(o.a,null):(o.a.c=o.c,N(o,o.b.e)),F(h)),h!==i;);i=e.d,((e=e.b).d=i).b=e}return this.r(this.b),void(this.c=this.b=null)}}this.b=this.c=null},this.libtess={GluTesselator:a,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901,GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111}},a.prototype.gluDeleteTess=a.prototype.x,a.prototype.gluTessProperty=a.prototype.B,a.prototype.gluGetTessProperty=a.prototype.y,a.prototype.gluTessNormal=a.prototype.A,a.prototype.gluTessCallback=a.prototype.z,a.prototype.gluTessVertex=a.prototype.C,a.prototype.gluTessBeginPolygon=a.prototype.u,a.prototype.gluTessBeginContour=a.prototype.t,a.prototype.gluTessEndContour=a.prototype.v,a.prototype.gluTessEndPolygon=a.prototype.w,void 0!==i&&(i.exports=this.libtess)},{}],2:[function(t,a,e){var r=new(t("./tessellator"));function n(){this.list=[],this.hash=Object.create(null)}function p(t,a){t=s(t),a=s(a);t!==a&&(t.rank<a.rank?t.parent=a:(a.parent=t).rank===a.rank&&(t.rank+=1))}function s(t){return t.parent!==t&&(t.parent=s(t.parent)),t.parent}function i(t,a,e){for(var i,r,n,s,o,h=(n=(r=a)[0]-t[0])*n+(r=r[1]-t[1])*r,c=0;c<4;c++){if((s=L(t,a,t,e[c]))<=0)o=-1;else{if(!(h<=s))return;o=1}if(0===c)i=o;else if(o!==i)return}return 1}function v(t,a){return!(i(t[0],t[1],a)||i(t[1],t[2],a)||i(a[0],a[1],t)||i(a[1],a[2],t))}function L(t,a,e,i){return(a[0]-t[0])*(i[0]-e[0])+(a[1]-t[1])*(i[1]-e[1])}function o(t,a,e,i){var r=a[0]-t[0],t=a[1]-t[1],n=i[0]-e[0],i=i[1]-e[1],a=((a[0]-e[0])*t-r*(a[1]-e[1]))/(n*t-r*i);return[e[0]+a*n,e[1]+a*i]}n.prototype.push=function(t){this.hash[t]||(this.hash[t]=!0,this.list.push(t))},n.prototype.pop=function(){var t;return this.list.length?(t=this.list.pop(),delete this.hash[t],t):null},a.exports=function(t,a,e,E){var T=a/2,d=(E=Math.max(Math.PI,E||2*Math.PI),t.vertices.map(function(t){return{coords:t,neighList:[]}})),S=t.edges.map(function(t,a){var e,i,r,n=t[0],s=t[1],o=d[n],h=d[s],c=(e=o.coords,b=h.coords,i=T,r=b[0]-e[0],b=b[1]-e[1],e=Math.sqrt(r*r+b*b),c=Math.acos(r/e),b<0&&(c*=-1),{angle:c,norm:e,dir:[r,b],ortho:[-i*b/e,i*r/e]}),b=(o.neighList.push({to:s,angle:c.angle,dir:c.dir,ortho:c.ortho,index:a}),h.neighList.push({to:n,angle:c.angle<=0?c.angle+Math.PI:c.angle-Math.PI,dir:[-c.dir[0],-c.dir[1]],ortho:[-c.ortho[0],-c.ortho[1]],index:a}),{rank:0,edge:t,points:{}});return b.points[s]={},b.points[n]={},b.parent=b}),G=[],_=(d.forEach(function(t,_){var a,e,i,p=t.coords,v=t.neighList,g=(v.sort(function(t,a){return t.angle-a.angle}),v.length);1===g?(t=v[0],a=[p[0]+t.ortho[0],p[1]+t.ortho[1]],e=[p[0]-t.ortho[0],p[1]-t.ortho[1]],(i=S[t.index].points)[_].first_vertex=t.index,i[_].last_vertex=t.index,i[_].first=a,i[_].remove_middle_first=!0,i[_].remove_middle_last=!0,i[_].last=e):v.forEach(function(t,a){var e,i,r,n,s,o=a===g-1,a=v[o?0:a+1],h=S[t.index].points,c=S[a.index].points,b=(h[_].first_vertex=a.index,c[_].last_vertex=t.index,[p[0]+t.ortho[0],p[1]+t.ortho[1]]),u=[b[0]+t.dir[0],b[1]+t.dir[1]],f=[p[0]-a.ortho[0],p[1]-a.ortho[1]],l=[f[0]+a.dir[0],f[1]+a.dir[1]],l=(i=(u=u)[0]-(e=b)[0],d=(n=l)[0]-(r=f)[0],0==(l=d*(s=u[1]-e[1])-i*(n=l[1]-r[1]))?{point:e,valid:!0}:(i=[r[0]+(s=((u[0]-r[0])*s-i*(u[1]-r[1]))/l)*d,r[1]+s*n],1<s||L(u,i,u,e)<0?{point:i,valid:!1}:{point:i,valid:!0})),d=l.point;l.valid?((o?a.angle+2*Math.PI:a.angle)-t.angle>E?(h[_].first=b,c[_].last=f,r=[d[0]-p[0],d[1]-p[1]],n=1/Math.sqrt(r[0]*r[0]+r[1]*r[1]),h[_].miter_first=c[_].miter_last=[p[0]+T*r[0]*n,p[1]+T*r[1]*n]):(h[_].first=d,c[_].last=d),2===g&&(h[_].remove_middle_first=!0,c[_].remove_middle_last=!0)):(s=[d[0]-t.ortho[0],d[1]-t.ortho[1]],u=[d[0]+a.ortho[0],d[1]+a.ortho[1]],G.push({done:[t.index,a.index],todo:[_,t.to,a.to],rectangles:[[b,d,s,p],[f,d,u,p]]}),h[_].first=b,c[_].last=f)})}),S.forEach(function(t){var a,e,i=t.edge,r=i[0],i=i[1],n=t.points[r],s=t.points[i],r=d[r].coords,i=d[i].coords,t=t.polygon=[];L(n.last,s.first,r,i)<0?(a=n.last_vertex,e=s.first_vertex,p(S[a],S[e]),t.push(o(n.miter_last||r,n.last,s.first,s.miter_first||i))):t.push(n.last,s.first),s.miter_first&&t.push(s.miter_first),s.remove_middle_first&&s.remove_middle_last||t.push(i),s.miter_last&&t.push(s.miter_last),L(n.first,s.last,r,i)<0?(a=n.first_vertex,e=s.last_vertex,p(S[a],S[e]),t.push(o(n.first,n.miter_first||r,s.miter_last||i,s.last))):t.push(s.last,n.first),n.miter_first&&t.push(n.miter_first),n.remove_middle_first&&n.remove_middle_last||t.push(r),n.miter_last&&t.push(n.miter_last)}),Object.create(null)),i=(G.forEach(function(t){for(var h,c=Object.create(null),a=t.done[0],e=t.done[1],b=S[a],i=S[e],u=(p(b,i),c[a]=!0,c[e]=!0,new n),f=(t.todo.forEach(function(t){u.push(t)}),t.rectangles[0]),l=t.rectangles[1];null!==(h=u.pop());)d[h].neighList.forEach(function(t){var a,e,i,r,n,s,o=t.index;!c[o]&&(a=t.to,(s=_[o])||(n=d[h].coords,r=d[a].coords,e=[n[0]+t.ortho[0],n[1]+t.ortho[1]],i=[r[0]+t.ortho[0],r[1]+t.ortho[1]],r=[r[0]-t.ortho[0],r[1]-t.ortho[1]],n=[n[0]-t.ortho[0],n[1]-t.ortho[1]],s=_[o]=[e,i,r,n]),c[o]=!0,v(s,f)||v(s,l))&&(p(b,S[o]),u.push(a))})}),[]);S.forEach(function(t,a){0<t.rank&&t.parent===t?(t.union=t.union||[],t.union.push(t.polygon),i.push(a)):t.parent===t?e(t.polygon):((a=s(t)).union=a.union||[],a.union.push(t.polygon))}),r._cb=e,i.forEach(function(t){r.run(S[t].union)}),delete r._cb}},{"./tessellator":3}],3:[function(t,a,e){var i;try{i=t("libtess")}catch(t){if(void 0===window.libtess)throw new Error("libtess must be loaded before graph-draw");i=window.libtess}var r=i.GluTesselator,n=i.gluEnum,s=(i.primitiveType,n.GLU_TESS_BOUNDARY_ONLY),o=i.primitiveType.GL_LINE_LOOP;function h(){r.call(this),this.gluTessNormal(0,0,1),this.gluTessProperty(n.GLU_TESS_WINDING_RULE,i.windingRule.GLU_TESS_WINDING_POSITIVE),this.gluTessCallback(n.GLU_TESS_VERTEX_DATA,this._vertex),this.gluTessCallback(n.GLU_TESS_BEGIN,this._begin),this.gluTessCallback(n.GLU_TESS_END,this._end),this.gluTessCallback(n.GLU_TESS_ERROR,this._error),this.gluTessCallback(n.GLU_TESS_COMBINE,this._combine)}((h.prototype=Object.create(r.prototype)).constructor=h).prototype.run=function(t){var a=this;this.gluTessBeginPolygon(),t.forEach(function(t){a.gluTessBeginContour(),t.forEach(function(t){a.gluTessVertex([t[0],t[1],0],t)}),a.gluTessEndContour()}),this.gluTessProperty(s,!0),this._output=[],this.gluTessEndPolygon(),this.gluTessBeginPolygon(),this._output.forEach(function(t){a.gluTessBeginContour(),t.forEach(function(t){a.gluTessVertex([t[0],t[1],0],t)}),a.gluTessEndContour()}),this.gluTessProperty(s,!1),this.gluTessEndPolygon()},h.prototype.clean=function(){this._accu=[],this._output=[]},h.prototype._begin=function(t){this._primitiveType=t,this._accu=[]},h.prototype._vertex=function(t){this._accu.push(t)},h.prototype._error=function(t){console.error("libtess error: "+t)},h.prototype._combine=function(t){return[t[0],t[1]]},h.prototype._end=function(){if(this._primitiveType===o)this._output.push(this._accu);else for(var t=0;t<this._accu.length;t+=3)this._cb([this._accu[t],this._accu[t+1],this._accu[t+2]])},a.exports=h},{libtess:1}]},{},[2])(2)});