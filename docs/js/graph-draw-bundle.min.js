!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).graphDraw=t()}}(function(){return function n(s,o,c){function h(a,t){if(!o[a]){if(!s[a]){var i="function"==typeof require&&require;if(!t&&i)return i(a,!0);if(u)return u(a,!0);var e=new Error("Cannot find module '"+a+"'");throw e.code="MODULE_NOT_FOUND",e}var r=o[a]={exports:{}};s[a][0].call(r.exports,function(t){return h(s[a][1][t]||t)},r,r.exports,n,s,o,c)}return o[a].exports}for(var u="function"==typeof require&&require,t=0;t<c.length;t++)h(c[t]);return h}({1:[function(t,a,i){"use strict";var e;function p(t,a){return t.b===a.b&&t.a===a.a}function v(t,a){return t.b<a.b||t.b===a.b&&t.a<=a.a}function g(t,a,i){var e=a.b-t.b,r=i.b-a.b;return 0<e+r?e<r?a.a-t.a+e/(e+r)*(t.a-i.a):a.a-i.a+r/(e+r)*(i.a-t.a):0}function E(t,a,i){var e=a.b-t.b,r=i.b-a.b;return 0<e+r?(a.a-i.a)*e+(a.a-t.a)*r:0}function T(t,a){return t.a<a.a||t.a===a.a&&t.b<=a.b}function S(t,a,i){var e=a.a-t.a,r=i.a-a.a;return 0<e+r?e<r?a.b-t.b+e/(e+r)*(t.b-i.b):a.b-i.b+r/(e+r)*(i.b-t.b):0}function G(t,a,i){var e=a.a-t.a,r=i.a-a.a;return 0<e+r?(a.b-i.b)*e+(a.b-t.b)*r:0}function L(t,a,i,e){return(t=t<0?0:t)<=(i=i<0?0:i)?0===i?(a+e)/2:a+t/(t+i)*(e-a):e+i/(t+i)*(a-e)}function s(t){var a=n(t.b);return r(a,t.c),r(a.b,t.c),o(a,t.a),a}function y(t,a){var i=!1,e=!1;t!==a&&(a.a!==t.a&&(e=!0,_(a.a,t.a)),a.d!==t.d&&(i=!0,c(a.d,t.d)),l(a,t),e||(r(a,t.a),t.a.c=t),i||(o(a,t.d),t.d.a=t))}function f(t){var a=t.b,i=!1;t.d!==t.b.d&&(i=!0,c(t.d,t.b.d)),t.c===t?_(t.a,null):(t.b.d.a=$(t),t.a.c=t.c,l(t,$(t)),i||o(t,t.d)),a.c===a?(_(a.a,null),c(a.d,null)):(t.d.a=$(a),a.a.c=a.c,l(a,$(a))),d(t)}function N(t){var a=n(t),i=a.b;return l(a,t.e),a.a=t.b.a,r(i,a.a),a.d=i.d=t.d,a=a.b,l(t.b,$(t.b)),l(t.b,a),t.b.a=a.a,a.b.a.c=a.b,a.b.d=t.b.d,a.f=t.f,a.b.f=t.b.f,a}function b(t,a){var i=!1,e=n(t),r=e.b;return a.d!==t.d&&(i=!0,c(a.d,t.d)),l(e,t.e),l(r,a),e.a=t.b.a,r.a=a.a,e.d=r.d=t.d,t.d.a=r,i||o(e,t.d),e}function n(t){var a=new J,i=new J,e=t.b.h;return(((i.h=e).b.h=a).h=t).b.h=i,a.b=i,((a.c=a).e=i).b=a,(i.c=i).e=a}function l(t,a){var i=t.c,e=a.c;i.b.e=a,(e.b.e=t).c=e,a.c=i}function r(t,a){var i=a.f,e=new at(a,i);for(i.e=e,i=(a.f=e).c=t;i.a=e,(i=i.c)!==t;);}function o(t,a){var i=a.d,e=new Z(a,i);for(i.b=e,(a.d=e).a=t,e.c=a.c,i=t;i.d=e,(i=i.e)!==t;);}function d(t){var a=t.h;t=t.b.h,(a.b.h=t).b.h=a}function _(t,a){for(var i=t.c,e=i;e.a=a,(e=e.c)!==i;);i=t.f,((e=t.e).f=i).e=e}function c(t,a){for(var i=t.a,e=i;e.d=a,(e=e.e)!==i;);i=t.d,((e=t.b).d=i).b=e}function m(t){var a=0;return Math.abs(t[1])>Math.abs(t[0])&&(a=1),Math.abs(t[2])>Math.abs(t[a])&&(a=2),a}var I=4e150;function U(t,a){t.f+=a.f,t.b.f+=a.b.f}function h(t,a,i){return t=t.a,a=a.a,i=i.a,a.b.a===t?i.b.a===t?v(a.a,i.a)?E(i.b.a,a.a,i.a)<=0:0<=E(a.b.a,i.a,a.a):E(i.b.a,t,i.a)<=0:i.b.a===t?0<=E(a.b.a,t,a.a):(a=g(a.b.a,t,a.a),(t=g(i.b.a,t,i.a))<=a)}function w(t){t.a.i=null;var a=t.e;a.a.c=a.c,a.c.a=a.a,t.e=null}function u(t,a){f(t.a),t.c=!1,(t.a=a).i=t}function O(t){for(var a=t.a.a;(t=lt(t)).a.a===a;);return t.c&&(u(t,a=b(bt(t).a.b,t.a.e)),t=lt(t)),t}function k(t,a,i){var e=new ft;return e.a=i,e.e=F(t.f,a.e,e),i.i=e}function x(t,a){switch(t.s){case 100130:return 0!=(1&a);case 100131:return 0!==a;case 100132:return 0<a;case 100133:return a<0;case 100134:return 2<=a||a<=-2}return!1}function A(t){var a=t.a,i=a.d;i.c=t.d,i.a=a,w(t)}function D(t,a,i){for(a=(t=a).a;t!==i;){t.c=!1;var e=bt(t),r=e.a;if(r.a!==a.a){if(!e.c){A(t);break}u(e,r=b(a.c.b,r.b))}a.c!==r&&(y($(r),r),y(a,r)),A(t),a=e.a,t=e}return a}function M(t,a,i,e,r,n){for(var s=!0;k(t,a,i.b),(i=i.c)!==e;);for(null===r&&(r=bt(a).a.b.c);(i=(e=bt(a)).a.b).a===r.a;)i.c!==r&&(y($(i),i),y($(r),i)),e.f=a.f-i.f,e.d=x(t,e.f),a.b=!0,!s&&B(t,a)&&(U(i,r),w(a),f(r)),s=!1,a=e,r=i;a.b=!0,n&&V(t,a)}function R(t,a,i,e,r){var n=[a.g[0],a.g[1],a.g[2]];a.d=null,a.d=t.o&&t.o(n,i,e,t.c)||null,null===a.d&&(r?t.n||(Q(t,100156),t.n=!0):a.d=i[0])}function C(t,a,i){var e=[null,null,null,null];e[0]=a.a.d,e[1]=i.a.d,R(t,a.a,e,[.5,.5,0,0],!1),y(a,i)}function P(t,a,i,e,r){var n=Math.abs(a.b-t.b)+Math.abs(a.a-t.a),s=Math.abs(i.b-t.b)+Math.abs(i.a-t.a),o=r+1;e[r]=.5*s/(n+s),e[o]=.5*n/(n+s),t.g[0]+=e[r]*a.g[0]+e[o]*i.g[0],t.g[1]+=e[r]*a.g[1]+e[o]*i.g[1],t.g[2]+=e[r]*a.g[2]+e[o]*i.g[2]}function B(t,a){var i=bt(a),e=a.a,r=i.a;if(v(e.a,r.a)){if(0<E(r.b.a,e.a,r.a))return!1;if(p(e.a,r.a)){if(e.a!==r.a){i=t.e;var n=e.a.h;if(0<=n){var s=(i=i.b).d,o=i.e,c=i.c,h=c[n];s[h]=s[i.a],(c[s[h]]=h)<=--i.a&&(h<=1?ht(i,h):v(o[s[h>>1]],o[s[h]])?ht(i,h):ut(i,h)),o[n]=null,c[n]=i.b,i.b=n}else for(i.c[-(n+1)]=null;0<i.a&&null===i.c[i.d[i.a-1]];)--i.a;C(t,$(r),e)}}else N(r.b),y(e,$(r)),a.b=i.b=!0}else{if(E(e.b.a,r.a,e.a)<0)return!1;lt(a).b=a.b=!0,N(e.b),y($(r),e)}return!0}function j(t,a){var i=bt(a),e=a.a,r=i.a,n=e.a,s=r.a,o=e.b.a,c=r.b.a,h=new at;if(E(o,t.a,n),E(c,t.a,s),n===s||Math.min(n.a,o.a)>Math.max(s.a,c.a))return!1;if(v(n,s)){if(0<E(c,n,s))return!1}else if(E(o,s,n)<0)return!1;var u,f,b=o,l=n,d=c,_=s;if(v(b,l)||(u=b,b=l,l=u),v(d,_)||(u=d,d=_,_=u),v(b,d)||(u=b,b=d,d=u,u=l,l=_,_=u),v(d,l)?v(l,_)?((u=g(b,d,l))+(f=g(d,l,_))<0&&(u=-u,f=-f),h.b=L(u,d.b,f,l.b)):((u=E(b,d,l))+(f=-E(b,_,l))<0&&(u=-u,f=-f),h.b=L(u,d.b,f,_.b)):h.b=(d.b+l.b)/2,T(b,l)||(u=b,b=l,l=u),T(d,_)||(u=d,d=_,_=u),T(b,d)||(u=b,b=d,d=u,u=l,l=_,_=u),T(d,l)?T(l,_)?((u=S(b,d,l))+(f=S(d,l,_))<0&&(u=-u,f=-f),h.a=L(u,d.a,f,l.a)):((u=G(b,d,l))+(f=-G(b,_,l))<0&&(u=-u,f=-f),h.a=L(u,d.a,f,_.a)):h.a=(d.a+l.a)/2,v(h,t.a)&&(h.b=t.a.b,h.a=t.a.a),v(b=v(n,s)?n:s,h)&&(h.b=b.b,h.a=b.a),p(h,n)||p(h,s))return B(t,a),!1;if(!p(o,t.a)&&0<=E(o,t.a,h)||!p(c,t.a)&&E(c,t.a,h)<=0){if(c===t.a)return N(e.b),y(r.b,e),e=bt(a=O(a)).a,D(t,bt(a),i),M(t,a,$(e),e,e,!0),!0;if(o===t.a){for(N(r.b),y(e.e,$(r)),s=(n=i=a).a.b.a;(n=lt(n)).a.b.a===s;);return n=bt(a=n).a.b.c,i.a=$(r),M(t,a,(r=D(t,i,null)).c,e.b.c,n,!0),!0}return 0<=E(o,t.a,h)&&(lt(a).b=a.b=!0,N(e.b),e.a.b=t.a.b,e.a.a=t.a.a),E(c,t.a,h)<=0&&(a.b=i.b=!0,N(r.b),r.a.b=t.a.b,r.a.a=t.a.a),!1}return N(e.b),N(r.b),y($(r),e),e.a.b=h.b,e.a.a=h.a,e.a.h=et(t.e,e.a),e=e.a,r=[0,0,0,0],h=[n.d,o.d,s.d,c.d],e.g[0]=e.g[1]=e.g[2]=0,P(e,n,o,r,0),P(e,s,c,r,2),R(t,e,h,r,!0),lt(a).b=a.b=i.b=!0,!1}function V(t,a){for(var i=bt(a);;){for(;i.b;)i=bt(a=i);if(!a.b&&(null===(a=lt(i=a))||!a.b))break;a.b=!1;var e,r=a.a,n=i.a;if(e=r.b.a!==n.b.a)t:{var s=bt(e=a),o=e.a,c=s.a,h=void 0;if(v(o.b.a,c.b.a)){if(E(o.b.a,c.b.a,o.a)<0){e=!1;break t}lt(e).b=e.b=!0,h=N(o),y(c.b,h),h.d.c=e.d}else{if(0<E(c.b.a,o.b.a,c.a)){e=!1;break t}e.b=s.b=!0,h=N(c),y(o.e,c.b),h.b.d.c=e.d}e=!0}if(e&&(i.c?(w(i),f(n),n=(i=bt(a)).a):a.c&&(w(a),f(r),r=(a=lt(i)).a)),r.a!==n.a)if(r.b.a===n.b.a||a.c||i.c||r.b.a!==t.a&&n.b.a!==t.a)B(t,a);else if(j(t,a))break;r.a===n.a&&r.b.a===n.b.a&&(U(n,r),w(a),f(r),a=lt(i))}}function q(t,a){for(var i=(t.a=a).c;null===i.i;)if((i=i.c)===a.c){i=t;var e=a;(s=new ft).a=e.c.b;for(var r=(c=i.f).a;null!==(r=r.a).b&&!c.c(c.b,s,r.b););var n=bt(c=r.b),s=c.a;r=n.a;if(0===E(s.b.a,e,s.a))p((s=c.a).a,e)||p(s.b.a,e)||(N(s.b),c.c&&(f(s.c),c.c=!1),y(e.c,s),q(i,e));else{var o=v(r.b.a,s.b.a)?c:n;n=void 0;c.d||o.c?(n=o===c?b(e.c.b,s.e):b(r.b.c.b,e.c).b,o.c?u(o,n):((c=k(s=i,c,n)).f=lt(c).f+c.a.f,c.d=x(s,c.f)),q(i,e)):M(i,c,e.c,e.c,null,!0)}return}if(c=(s=bt(i=O(i.i))).a,(s=D(t,s,null)).c===c){s=(c=s).c,r=bt(i),n=i.a,o=r.a;var c,h=!1;n.b.a!==o.b.a&&j(t,i),p(n.a,t.a)&&(y($(s),n),s=bt(i=O(i)).a,D(t,bt(i),r),h=!0),p(o.a,t.a)&&(y(c,$(o)),c=D(t,r,null),h=!0),h?M(t,i,c.c,s,s,!0):(e=v(o.a,n.a)?$(o):n,M(t,i,e=b(c.c.b,e),e.c,e.c,!1),e.b.i.c=!0,V(t,i))}else M(t,i,s.c,c,c,!0)}function W(t,a){var i=new ft,e=s(t.b);e.a.b=I,e.a.a=a,e.b.a.b=-I,e.b.a.a=a,t.a=e.b.a,i.a=e,i.f=0,i.d=!1,i.c=!1,i.h=!0,i.b=!1,e=F(e=t.f,e.a,i),i.e=e}function Y(t){this.a=new X,this.b=t,this.c=h}function F(t,a,i){for(;null!==(a=a.c).b&&!t.c(t.b,a.b,i););return t=new X(i,a.a,a),a.a.c=t,a.a=t}function X(t,a,i){this.b=t||null,this.a=a||this,this.c=i||this}function z(){this.d=H,this.p=this.b=this.q=null,this.j=[0,0,0],this.s=100130,this.n=!1,this.o=this.a=this.e=this.f=null,this.m=!1,this.c=this.r=this.i=this.k=this.l=this.h=null}var H=0;function K(t,a){if(t.d!==a)for(;t.d!==a;)if(t.d<a)switch(t.d){case H:Q(t,100151),t.u(null);break;case 1:Q(t,100152),t.t()}else switch(t.d){case 2:Q(t,100154),t.v();break;case 1:Q(t,100153),t.w()}}function Q(t,a){t.p&&t.p(a,t.c)}function Z(t,a){this.b=t||this,this.d=a||this,this.a=null,this.c=!1}function J(){(this.h=this).i=this.d=this.a=this.e=this.c=this.b=null,this.f=0}function $(t){return t.b.e}function tt(){this.c=new at,this.a=new Z,this.b=new J,this.d=new J,this.b.b=this.d,this.d.b=this.b}function at(t,a){this.e=t||this,this.f=a||this,this.d=this.c=null,this.g=[0,0,0],this.h=this.a=this.b=0}function it(){this.c=[],this.d=null,this.a=0,this.e=!1,this.b=new nt}function et(t,a){if(t.e){var i,e=t.b,r=++e.a;return 2*r>e.f&&(e.f*=2,e.c=st(e.c,e.f+1)),0===e.b?i=r:(i=e.b,e.b=e.c[e.b]),e.e[i]=a,e.c[i]=r,e.d[r]=i,e.h&&ut(e,r),i}return e=t.a++,t.c[e]=a,-(e+1)}function rt(t){if(0===t.a)return ct(t.b);var a=t.c[t.d[t.a-1]];if(0!==t.b.a&&v(ot(t.b),a))return ct(t.b);for(;--t.a,0<t.a&&null===t.c[t.d[t.a-1]];);return a}function nt(){this.d=st([0],33),this.e=[null,null],this.c=[0,0],this.a=0,this.f=32,this.b=0,this.h=!1,this.d[1]=1}function st(t,a){for(var i=Array(a),e=0;e<t.length;e++)i[e]=t[e];for(;e<a;e++)i[e]=0;return i}function ot(t){return t.e[t.d[1]]}function ct(t){var a=t.d,i=t.e,e=t.c,r=a[1],n=i[r];return 0<t.a&&(a[1]=a[t.a],e[a[1]]=1,i[r]=null,e[r]=t.b,t.b=r,0<--t.a&&ht(t,1)),n}function ht(t,a){for(var i=t.d,e=t.e,r=t.c,n=a,s=i[n];;){var o=n<<1;o<t.a&&v(e[i[o+1]],e[i[o]])&&(o+=1);var c=i[o];if(o>t.a||v(e[s],e[c])){r[i[n]=s]=n;break}r[i[n]=c]=n,n=o}}function ut(t,a){for(var i=t.d,e=t.e,r=t.c,n=a,s=i[n];;){var o=n>>1,c=i[o];if(0===o||v(e[c],e[s])){r[i[n]=s]=n;break}r[i[n]=c]=n,n=o}}function ft(){this.e=this.a=null,this.f=0,this.c=this.b=this.h=this.d=!1}function bt(t){return t.e.c.b}function lt(t){return t.e.a.b}(e=z.prototype).x=function(){K(this,H)},e.B=function(t,a){switch(t){case 100142:return;case 100140:switch(a){case 100130:case 100131:case 100132:case 100133:case 100134:return void(this.s=a)}break;case 100141:return void(this.m=!!a);default:return void Q(this,100900)}Q(this,100901)},e.y=function(t){switch(t){case 100142:return 0;case 100140:return this.s;case 100141:return this.m;default:Q(this,100900)}return!1},e.A=function(t,a,i){this.j[0]=t,this.j[1]=a,this.j[2]=i},e.z=function(t,a){var i=a||null;switch(t){case 100100:case 100106:this.h=i;break;case 100104:case 100110:this.l=i;break;case 100101:case 100107:this.k=i;break;case 100102:case 100108:this.i=i;break;case 100103:case 100109:this.p=i;break;case 100105:case 100111:this.o=i;break;case 100112:this.r=i;break;default:Q(this,100900)}},e.C=function(t,a){var i=!1,e=[0,0,0];K(this,2);for(var r=0;r<3;++r){var n=t[r];n<-1e150&&(n=-1e150,i=!0),1e150<n&&(n=1e150,i=!0),e[r]=n}i&&Q(this,100155),null===(i=this.q)?y(i=s(this.b),i.b):(N(i),i=i.e),i.a.d=a,i.a.g[0]=e[0],i.a.g[1]=e[1],i.a.g[2]=e[2],i.f=1,i.b.f=-1,this.q=i},e.u=function(t){K(this,H),this.d=1,this.b=new tt,this.c=t},e.t=function(){K(this,1),this.d=2,this.q=null},e.v=function(){K(this,2),this.d=1},e.w=function(){K(this,1),this.d=H;var t,a,i=!1,e=[c=this.j[0],r=this.j[1],s=this.j[2]];if(0===c&&0===r&&0===s){for(var r=[-2e150,-2e150,-2e150],n=[2e150,2e150,2e150],s=[],o=[],c=(i=this.b.c).e;c!==i;c=c.e)for(var h=0;h<3;++h){var u=c.g[h];u<n[h]&&(n[h]=u,o[h]=c),u>r[h]&&(r[h]=u,s[h]=c)}if(c=0,r[1]-n[1]>r[0]-n[0]&&(c=1),r[2]-n[2]>r[c]-n[c]&&(c=2),n[c]>=r[c])e[0]=0,e[1]=0,e[2]=1;else{for(r=0,n=o[c],s=s[c],o=[0,0,0],n=[n.g[0]-s.g[0],n.g[1]-s.g[1],n.g[2]-s.g[2]],h=[0,0,0],c=i.e;c!==i;c=c.e)h[0]=c.g[0]-s.g[0],h[1]=c.g[1]-s.g[1],h[2]=c.g[2]-s.g[2],o[0]=n[1]*h[2]-n[2]*h[1],o[1]=n[2]*h[0]-n[0]*h[2],o[2]=n[0]*h[1]-n[1]*h[0],r<(u=o[0]*o[0]+o[1]*o[1]+o[2]*o[2])&&(r=u,e[0]=o[0],e[1]=o[1],e[2]=o[2]);r<=0&&(e[0]=e[1]=e[2]=0,e[m(n)]=1)}i=!0}for(o=m(e),c=this.b.c,r=(o+1)%3,s=(o+2)%3,o=0<e[o]?1:-1,e=c.e;e!==c;e=e.e)e.b=e.g[r],e.a=o*e.g[s];if(i){for(e=0,c=(i=this.b.a).b;c!==i;c=c.b)if(!((r=c.a).f<=0))for(;e+=(r.a.b-r.b.a.b)*(r.a.a+r.b.a.a),(r=r.e)!==c.a;);if(e<0)for(i=(e=this.b.c).e;i!==e;i=i.e)i.a=-i.a}for(this.n=!1,c=(e=this.b.b).h;c!==e;c=i)i=c.h,r=c.e,p(c.a,c.b.a)&&c.e.e!==c&&(C(this,r,c),f(c),r=(c=r).e),r.e===c&&(r!==c&&(r!==i&&r!==i.b||(i=i.h),f(r)),c!==i&&c!==i.b||(i=i.h),f(c));for(this.e=e=new it,c=(i=this.b.c).e;c!==i;c=c.e)c.h=et(e,c);for(function(t){t.d=[];for(var a=0;a<t.a;a++)t.d[a]=a;t.d.sort((i=t.c,function(t,a){return v(i[t],i[a])?1:-1})),t.e=!0,function(t){for(var a=t.a;1<=a;--a)ht(t,a);t.h=!0}(t.b);var i}(e),this.f=new Y(this),W(this,-I),W(this,I);null!==(e=rt(this.e));){for(;;){t:if(c=this.e,0===c.a)i=ot(c.b);else if(i=c.c[c.d[c.a-1]],0!==c.b.a&&(c=ot(c.b),v(c,i))){i=c;break t}if(null===i||!p(i,e))break;i=rt(this.e),C(this,e.c,i.c)}q(this,e)}for(this.a=this.f.a.a.b.a.a,e=0;null!==(i=this.f.a.a.b);)i.h||++e,w(i);for(this.f=null,(e=this.e).b=null,e.d=null,this.e=e.c=null,c=(e=this.b).a.b;c!==e.a;c=i)i=c.b,(c=c.a).e.e===c&&(U(c.c,c),f(c));if(!this.n){if(e=this.b,this.m)for(c=e.b.h;c!==e.b;c=i)i=c.h,c.b.d.c!==c.d.c?c.f=c.d.c?1:-1:f(c);else for(c=e.a.b;c!==e.a;c=i)if(i=c.b,c.c){for(c=c.a;v(c.b.a,c.a);c=c.c.b);for(;v(c.a,c.b.a);c=c.e);for(r=c.c.b,s=void 0;c.e!==r;)if(v(c.b.a,r.a)){for(;r.e!==c&&(v((a=r.e).b.a,a.a)||E(r.a,r.b.a,r.e.b.a)<=0);)r=(s=b(r.e,r)).b;r=r.c.b}else{for(;r.e!==c&&(v((t=c.c.b).a,t.b.a)||0<=E(c.b.a,c.a,c.c.b.a));)c=(s=b(c,c.c.b)).b;c=c.e}for(;r.e.e!==c;)r=(s=b(r.e,r)).b}if(this.h||this.i||this.k||this.l)if(this.m){for(i=(e=this.b).a.b;i!==e.a;i=i.b)if(i.c){for(this.h&&this.h(2,this.c),c=i.a;this.k&&this.k(c.a.d,this.c),(c=c.e)!==i.a;);this.i&&this.i(this.c)}}else{for(e=this.b,i=!!this.l,c=!1,r=-1,s=e.a.d;s!==e.a;s=s.d)if(s.c)for(c||(this.h&&this.h(4,this.c),c=!0),o=s.a;i&&(r!==(n=o.b.d.c?0:1)&&(r=n,this.l&&this.l(!!r,this.c))),this.k&&this.k(o.a.d,this.c),(o=o.e)!==s.a;);c&&this.i&&this.i(this.c)}if(this.r){for(c=(e=this.b).a.b;c!==e.a;c=i)if(i=c.b,!c.c){for(s=(r=c.a).e,o=void 0;s=(o=s).e,(o.d=null)===o.b.d&&(o.c===o?_(o.a,null):(o.a.c=o.c,l(o,$(o))),(n=o.b).c===n?_(n.a,null):(n.a.c=n.c,l(n,$(n))),d(o)),o!==r;);r=c.d,((c=c.b).d=r).b=c}return this.r(this.b),void(this.c=this.b=null)}}this.b=this.c=null},this.libtess={GluTesselator:z,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901,GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111}},z.prototype.gluDeleteTess=z.prototype.x,z.prototype.gluTessProperty=z.prototype.B,z.prototype.gluGetTessProperty=z.prototype.y,z.prototype.gluTessNormal=z.prototype.A,z.prototype.gluTessCallback=z.prototype.z,z.prototype.gluTessVertex=z.prototype.C,z.prototype.gluTessBeginPolygon=z.prototype.u,z.prototype.gluTessBeginContour=z.prototype.t,z.prototype.gluTessEndContour=z.prototype.v,z.prototype.gluTessEndPolygon=z.prototype.w,void 0!==a&&(a.exports=this.libtess)},{}],2:[function(t,a,i){"use strict";var n=new(t("./tessellator"));function s(){this.list=[],this.hash=Object.create(null)}function g(t,a){var i=o(t),e=o(a);i!==e&&(i.rank<e.rank?i.parent=e:(e.parent=i).rank===e.rank&&(i.rank+=1))}function o(t){return t.parent!==t&&(t.parent=o(t.parent)),t.parent}function e(t,a,i){for(var e,r,n,s,o,c,h,u=(r=t,s=(n=a)[0]-r[0],o=n[1]-r[1],s*s+o*o),f=0;f<4;f++){if((c=y(t,a,t,i[f]))<=0)h=-1;else{if(!(u<=c))return!1;h=1}if(0===f)e=h;else if(h!==e)return!1}return!0}function L(t,a){return!(e(t[0],t[1],a)||e(t[1],t[2],a)||e(a[0],a[1],t)||e(a[1],a[2],t))}function y(t,a,i,e){return(a[0]-t[0])*(e[0]-i[0])+(a[1]-t[1])*(e[1]-i[1])}function f(t,a,i,e){var r=a[0]-t[0],n=a[1]-t[1],s=e[0]-i[0],o=e[1]-i[1],c=((a[0]-i[0])*n-r*(a[1]-i[1]))/(s*n-r*o);return[i[0]+c*s,i[1]+c*o]}s.prototype.push=function(t){this.hash[t]||(this.hash[t]=!0,this.list.push(t))},s.prototype.pop=function(){if(this.list.length){var t=this.list.pop();return delete this.hash[t],t}return null},a.exports=function(t,a,e,E){var T=a/2;E=Math.max(Math.PI,E||2*Math.PI);var p=t.vertices.map(function(t){return{coords:t,neighList:[]}}),S=t.edges.map(function(t,a){var i,e,r,n,s,o,c,h=t[0],u=t[1],f=p[h],b=p[u],l=(i=f.coords,e=b.coords,r=T,n=e[0]-i[0],s=e[1]-i[1],o=Math.sqrt(n*n+s*s),c=Math.acos(n/o),s<0&&(c*=-1),{angle:c,norm:o,dir:[n,s],ortho:[-r*s/o,r*n/o]});f.neighList.push({to:u,angle:l.angle,dir:l.dir,ortho:l.ortho,index:a}),b.neighList.push({to:h,angle:l.angle<=0?l.angle+Math.PI:l.angle-Math.PI,dir:[-l.dir[0],-l.dir[1]],ortho:[-l.ortho[0],-l.ortho[1]],index:a});var d={rank:0,edge:t,points:{}};return d.points[u]={},d.points[h]={},d.parent=d}),G=[];p.forEach(function(t,_){var p=t.coords,v=t.neighList;v.sort(function(t,a){return t.angle-a.angle});var g=v.length;if(1===g){var a=v[0],i=[p[0]+a.ortho[0],p[1]+a.ortho[1]],e=[p[0]-a.ortho[0],p[1]-a.ortho[1]],r=S[a.index].points;r[_].first_vertex=a.index,r[_].last_vertex=a.index,r[_].first=i,r[_].remove_middle_first=!0,r[_].remove_middle_last=!0,r[_].last=e}else v.forEach(function(t,a){var i=a===g-1,e=v[i?0:a+1],r=S[t.index].points,n=S[e.index].points;r[_].first_vertex=e.index,n[_].last_vertex=t.index;var s=[p[0]+t.ortho[0],p[1]+t.ortho[1]],o=[s[0]+t.dir[0],s[1]+t.dir[1]],c=[p[0]-e.ortho[0],p[1]-e.ortho[1]],h=function(t,a,i,e){var r=a[0]-t[0],n=a[1]-t[1],s=e[0]-i[0],o=e[1]-i[1],c=s*n-r*o;if(0===c)return{point:t,valid:!0};var h=((a[0]-i[0])*n-r*(a[1]-i[1]))/c,u=[i[0]+h*s,i[1]+h*o];return 1<h||y(a,u,a,t)<0?{point:u,valid:!1}:{point:u,valid:!0}}(s,o,c,[c[0]+e.dir[0],c[1]+e.dir[1]]),u=h.point;if(h.valid){if((i?e.angle+2*Math.PI:e.angle)-t.angle>E){r[_].first=s,n[_].last=c;var f=[u[0]-p[0],u[1]-p[1]],b=1/Math.sqrt(f[0]*f[0]+f[1]*f[1]);r[_].miter_first=n[_].miter_last=[p[0]+T*f[0]*b,p[1]+T*f[1]*b]}else r[_].first=u,n[_].last=u;2===g&&(r[_].remove_middle_first=!0,n[_].remove_middle_last=!0)}else{var l=[u[0]-t.ortho[0],u[1]-t.ortho[1]],d=[u[0]+e.ortho[0],u[1]+e.ortho[1]];G.push({done:[t.index,e.index],todo:[_,t.to,e.to],rectangles:[[s,u,l,p],[c,u,d,p]]}),r[_].first=s,n[_].last=c}})}),S.forEach(function(t){var a=t.edge,i=a[0],e=a[1],r=t.points[i],n=t.points[e],s=p[i].coords,o=p[e].coords,c=t.polygon=[];if(y(r.last,n.first,s,o)<0){var h=r.last_vertex,u=n.first_vertex;g(S[h],S[u]),c.push(f(r.miter_last||s,r.last,n.first,n.miter_first||o))}else c.push(r.last,n.first);n.miter_first&&c.push(n.miter_first),n.remove_middle_first&&n.remove_middle_last||c.push(o),n.miter_last&&c.push(n.miter_last),y(r.first,n.last,s,o)<0?(h=r.first_vertex,u=n.last_vertex,g(S[h],S[u]),c.push(f(r.first,r.miter_first||s,n.miter_last||o,n.last))):c.push(n.last,r.first),r.miter_first&&c.push(r.miter_first),r.remove_middle_first&&r.remove_middle_last||c.push(s),r.miter_last&&c.push(r.miter_last)});var v=Object.create(null);G.forEach(function(t){var u=Object.create(null),a=t.done[0],i=t.done[1],f=S[a],e=S[i];g(f,e),u[a]=!0,u[i]=!0;var b,l=new s;t.todo.forEach(function(t){l.push(t)});for(var d=t.rectangles[0],_=t.rectangles[1];null!==(b=l.pop());)p[b].neighList.forEach(function(t){var a=t.index;if(!u[a]){var i=t.to,e=v[a];if(!e){var r=p[b].coords,n=p[i].coords,s=[r[0]+t.ortho[0],r[1]+t.ortho[1]],o=[n[0]+t.ortho[0],n[1]+t.ortho[1]],c=[n[0]-t.ortho[0],n[1]-t.ortho[1]],h=[r[0]-t.ortho[0],r[1]-t.ortho[1]];e=v[a]=[s,o,c,h]}u[a]=!0,(L(e,d)||L(e,_))&&(g(f,S[a]),l.push(i))}})});var r=[];S.forEach(function(t,a){if(0<t.rank&&t.parent===t)t.union=t.union||[],t.union.push(t.polygon),r.push(a);else if(t.parent===t)e(t.polygon);else{var i=o(t);i.union=i.union||[],i.union.push(t.polygon)}}),n._cb=e,r.forEach(function(t){n.run(S[t].union)}),delete n._cb}},{"./tessellator":3}],3:[function(t,a,i){"use strict";var e;try{e=t("libtess")}catch(t){if(void 0===window.libtess)throw new Error("libtess must be loaded before graph-draw");e=window.libtess}var r=e.GluTesselator,n=e.gluEnum,s=(e.primitiveType,n.GLU_TESS_BOUNDARY_ONLY),o=e.primitiveType.GL_LINE_LOOP;function c(){r.call(this),this.gluTessNormal(0,0,1),this.gluTessProperty(n.GLU_TESS_WINDING_RULE,e.windingRule.GLU_TESS_WINDING_POSITIVE),this.gluTessCallback(n.GLU_TESS_VERTEX_DATA,this._vertex),this.gluTessCallback(n.GLU_TESS_BEGIN,this._begin),this.gluTessCallback(n.GLU_TESS_END,this._end),this.gluTessCallback(n.GLU_TESS_ERROR,this._error),this.gluTessCallback(n.GLU_TESS_COMBINE,this._combine)}((c.prototype=Object.create(r.prototype)).constructor=c).prototype.run=function(t){var a=this;this.gluTessBeginPolygon(),t.forEach(function(t){a.gluTessBeginContour(),t.forEach(function(t){a.gluTessVertex([t[0],t[1],0],t)}),a.gluTessEndContour()}),this.gluTessProperty(s,!0),this._output=[],this.gluTessEndPolygon(),this.gluTessBeginPolygon(),this._output.forEach(function(t){a.gluTessBeginContour(),t.forEach(function(t){a.gluTessVertex([t[0],t[1],0],t)}),a.gluTessEndContour()}),this.gluTessProperty(s,!1),this.gluTessEndPolygon()},c.prototype.clean=function(){this._accu=[],this._output=[]},c.prototype._begin=function(t){this._primitiveType=t,this._accu=[]},c.prototype._vertex=function(t){this._accu.push(t)},c.prototype._error=function(t){console.error("libtess error: "+t)},c.prototype._combine=function(t){return[t[0],t[1]]},c.prototype._end=function(){if(this._primitiveType===o)this._output.push(this._accu);else for(var t=0;t<this._accu.length;t+=3)this._cb([this._accu[t],this._accu[t+1],this._accu[t+2]])},a.exports=c},{libtess:1}]},{},[2])(2)});