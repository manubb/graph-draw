!function(t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).graphDraw=t()}(function(){return function e(r,n,s){function o(a,t){if(!n[a]){if(!r[a]){var i="function"==typeof require&&require;if(!t&&i)return i(a,!0);if(c)return c(a,!0);throw(i=new Error("Cannot find module '"+a+"'")).code="MODULE_NOT_FOUND",i}i=n[a]={exports:{}},r[a][0].call(i.exports,function(t){return o(r[a][1][t]||t)},i,i.exports,e,r,n,s)}return n[a].exports}for(var c="function"==typeof require&&require,t=0;t<s.length;t++)o(s[t]);return o}({1:[function(t,a,i){"use strict";var e;function p(t,a){return t.b===a.b&&t.a===a.a}function v(t,a){return t.b<a.b||t.b===a.b&&t.a<=a.a}function g(t,a,i){var e=a.b-t.b,r=i.b-a.b;return 0<e+r?e<r?a.a-t.a+e/(e+r)*(t.a-i.a):a.a-i.a+r/(e+r)*(i.a-t.a):0}function E(t,a,i){var e=a.b-t.b,r=i.b-a.b;return 0<e+r?(a.a-i.a)*e+(a.a-t.a)*r:0}function T(t,a){return t.a<a.a||t.a===a.a&&t.b<=a.b}function S(t,a,i){var e=a.a-t.a,r=i.a-a.a;return 0<e+r?e<r?a.b-t.b+e/(e+r)*(t.b-i.b):a.b-i.b+r/(e+r)*(i.b-t.b):0}function G(t,a,i){var e=a.a-t.a,r=i.a-a.a;return 0<e+r?(a.b-i.b)*e+(a.b-t.b)*r:0}function L(t,a,i,e){return(t=t<0?0:t)<=(i=i<0?0:i)?0===i?(a+e)/2:a+t/(t+i)*(e-a):e+i/(t+i)*(a-e)}function s(t){var a=n(t.b);return r(a,t.c),r(a.b,t.c),o(a,t.a),a}function y(t,a){var i=!1,e=!1;t!==a&&(a.a!==t.a&&(e=!0,_(a.a,t.a)),a.d!==t.d&&(i=!0,c(a.d,t.d)),l(a,t),e||(r(a,t.a),t.a.c=t),i||(o(a,t.d),t.d.a=t))}function b(t){var a=t.b,i=!1;t.d!==t.b.d&&(i=!0,c(t.d,t.b.d)),t.c===t?_(t.a,null):(t.b.d.a=t.b.e,t.a.c=t.c,l(t,t.b.e),i||o(t,t.d)),a.c===a?(_(a.a,null),c(a.d,null)):(t.d.a=a.b.e,a.a.c=a.c,l(a,a.b.e)),d(t)}function N(t){var a=n(t),i=a.b;return l(a,t.e),a.a=t.b.a,r(i,a.a),a.d=i.d=t.d,a=a.b,l(t.b,t.b.b.e),l(t.b,a),t.b.a=a.a,a.b.a.c=a.b,a.b.d=t.b.d,a.f=t.f,a.b.f=t.b.f,a}function f(t,a){var i=!1,e=n(t),r=e.b;return a.d!==t.d&&(i=!0,c(a.d,t.d)),l(e,t.e),l(r,a),e.a=t.b.a,r.a=a.a,e.d=r.d=t.d,t.d.a=r,i||o(e,t.d),e}function n(t){var a=new Q,i=new Q,e=t.b.h;return(((i.h=e).b.h=a).h=t).b.h=i,a.b=i,((a.c=a).e=i).b=a,(i.c=i).e=a}function l(t,a){var i=t.c,e=a.c;i.b.e=a,(e.b.e=t).c=e,a.c=i}function r(t,a){var i=a.f,e=new J(a,i);for(i.e=e,i=(a.f=e).c=t;i.a=e,(i=i.c)!==t;);}function o(t,a){var i=a.d,e=new K(a,i);for(i.b=e,(a.d=e).a=t,e.c=a.c,i=t;i.d=e,(i=i.e)!==t;);}function d(t){var a=t.h;t=t.b.h,(a.b.h=t).b.h=a}function _(t,a){for(var i=t.c,e=i;e.a=a,(e=e.c)!==i;);i=t.f,((e=t.e).f=i).e=e}function c(t,a){for(var i=t.a,e=i;e.d=a,(e=e.e)!==i;);i=t.d,((e=t.b).d=i).b=e}function m(t){var a=0;return Math.abs(t[1])>Math.abs(t[0])&&(a=1),a=Math.abs(t[2])>Math.abs(t[a])?2:a}var I=4e150;function U(t,a){t.f+=a.f,t.b.f+=a.b.f}function h(t,a,i){return t=t.a,a=a.a,i=i.a,a.b.a===t?i.b.a===t?v(a.a,i.a)?E(i.b.a,a.a,i.a)<=0:0<=E(a.b.a,i.a,a.a):E(i.b.a,t,i.a)<=0:i.b.a===t?0<=E(a.b.a,t,a.a):(a=g(a.b.a,t,a.a),(t=g(i.b.a,t,i.a))<=a)}function w(t){t.a.i=null;var a=t.e;a.a.c=a.c,a.c.a=a.a,t.e=null}function O(t,a){b(t.a),t.c=!1,(t.a=a).i=t}function k(t){for(var a=t.a.a;(t=ut(t)).a.a===a;);return t.c&&(O(t,a=f(ht(t).a.b,t.a.e)),t=ut(t)),t}function x(t,a,i){var e=new ct;return e.a=i,e.e=Y(t.f,a.e,e),i.i=e}function A(t,a){switch(t.s){case 100130:return 0!=(1&a);case 100131:return 0!==a;case 100132:return 0<a;case 100133:return a<0;case 100134:return 2<=a||a<=-2}return!1}function u(t){var a=t.a,i=a.d;i.c=t.d,i.a=a,w(t)}function D(t,a,i){for(a=(t=a).a;t!==i;){t.c=!1;var e=ht(t),r=e.a;if(r.a!==a.a){if(!e.c){u(t);break}O(e,r=f(a.c.b,r.b))}a.c!==r&&(y(r.b.e,r),y(a,r)),u(t),a=e.a,t=e}return a}function M(t,a,i,e,r,n){for(var s=!0;x(t,a,i.b),(i=i.c)!==e;);for(null===r&&(r=ht(a).a.b.c);(i=(e=ht(a)).a.b).a===r.a;)i.c!==r&&(y(i.b.e,i),y(r.b.e,i)),e.f=a.f-i.f,e.d=A(t,e.f),a.b=!0,!s&&B(t,a)&&(U(i,r),w(a),b(r)),s=!1,a=e,r=i;a.b=!0,n&&V(t,a)}function R(t,a,i,e,r){var n=[a.g[0],a.g[1],a.g[2]];a.d=null,a.d=t.o&&t.o(n,i,e,t.c)||null,null===a.d&&(r?t.n||(H(t,100156),t.n=!0):a.d=i[0])}function C(t,a,i){var e=[null,null,null,null];e[0]=a.a.d,e[1]=i.a.d,R(t,a.a,e,[.5,.5,0,0],!1),y(a,i)}function P(t,a,i,e,r){var n=Math.abs(a.b-t.b)+Math.abs(a.a-t.a),s=Math.abs(i.b-t.b)+Math.abs(i.a-t.a),o=r+1;e[r]=.5*s/(n+s),e[o]=.5*n/(n+s),t.g[0]+=e[r]*a.g[0]+e[o]*i.g[0],t.g[1]+=e[r]*a.g[1]+e[o]*i.g[1],t.g[2]+=e[r]*a.g[2]+e[o]*i.g[2]}function B(t,a){var i=ht(a),e=a.a,r=i.a;if(v(e.a,r.a)){if(0<E(r.b.a,e.a,r.a))return;if(p(e.a,r.a)){if(e.a!==r.a){var i=t.e,n=e.a.h;if(0<=n){var s=(i=i.b).d,o=i.e,c=i.c,h=c[n];s[h]=s[i.a],(c[s[h]]=h)<=--i.a&&(h<=1||v(o[s[h>>1]],o[s[h]])?st:ot)(i,h),o[n]=null,c[n]=i.b,i.b=n}else for(i.c[-(n+1)]=null;0<i.a&&null===i.c[i.d[i.a-1]];)--i.a;C(t,r.b.e,e)}}else N(r.b),y(e,r.b.e),a.b=i.b=!0}else{if(E(e.b.a,r.a,e.a)<0)return;ut(a).b=a.b=!0,N(e.b),y(r.b.e,e)}return 1}function j(t,a){var i=ht(a),e=a.a,r=i.a,n=e.a,s=r.a,o=e.b.a,c=r.b.a,h=new J;if(E(o,t.a,n),E(c,t.a,s),!(n===s||Math.min(n.a,o.a)>Math.max(s.a,c.a))){if(v(n,s)){if(0<E(c,n,s))return}else if(E(o,s,n)<0)return;var u,b,f=o,l=n,d=c,_=s;if(v(f,l)||(u=f,f=l,l=u),v(d,_)||(u=d,d=_,_=u),v(f,d)||(u=f,f=d,d=u,u=l,l=_,_=u),v(d,l)?v(l,_)?((u=g(f,d,l))+(b=g(d,l,_))<0&&(u=-u,b=-b),h.b=L(u,d.b,b,l.b)):((u=E(f,d,l))+(b=-E(f,_,l))<0&&(u=-u,b=-b),h.b=L(u,d.b,b,_.b)):h.b=(d.b+l.b)/2,T(f,l)||(u=f,f=l,l=u),T(d,_)||(u=d,d=_,_=u),T(f,d)||(u=f,f=d,d=u,u=l,l=_,_=u),T(d,l)?T(l,_)?((u=S(f,d,l))+(b=S(d,l,_))<0&&(u=-u,b=-b),h.a=L(u,d.a,b,l.a)):((u=G(f,d,l))+(b=-G(f,_,l))<0&&(u=-u,b=-b),h.a=L(u,d.a,b,_.a)):h.a=(d.a+l.a)/2,v(h,t.a)&&(h.b=t.a.b,h.a=t.a.a),f=v(n,s)?n:s,v(f,h)&&(h.b=f.b,h.a=f.a),p(h,n)||p(h,s))return B(t,a),0;if(!p(o,t.a)&&0<=E(o,t.a,h)||!p(c,t.a)&&E(c,t.a,h)<=0){if(c===t.a)return N(e.b),y(r.b,e),e=ht(a=k(a)).a,D(t,ht(a),i),M(t,a,e.b.e,e,e,!0),1;if(o!==t.a)return 0<=E(o,t.a,h)&&(ut(a).b=a.b=!0,N(e.b),e.a.b=t.a.b,e.a.a=t.a.a),void(E(c,t.a,h)<=0&&(a.b=i.b=!0,N(r.b),r.a.b=t.a.b,r.a.a=t.a.a));for(N(r.b),y(e.e,r.b.e),s=(n=i=a).a.b.a;(n=ut(n)).a.b.a===s;);return n=ht(a=n).a.b.c,i.a=r.b.e,M(t,a,(r=D(t,i,null)).c,e.b.c,n,!0),1}N(e.b),N(r.b),y(r.b.e,e),e.a.b=h.b,e.a.a=h.a,e.a.h=tt(t.e,e.a),e=e.a,r=[0,0,0,0],h=[n.d,o.d,s.d,c.d],e.g[0]=e.g[1]=e.g[2]=0,P(e,n,o,r,0),P(e,s,c,r,2),R(t,e,h,r,!0),ut(a).b=a.b=i.b=!0}}function V(t,a){for(var i=ht(a);;){for(;i.b;)i=ht(a=i);if(!a.b&&(null===(a=ut(i=a))||!a.b))break;a.b=!1;var e=a.a,r=i.a;if(n=e.b.a!==r.b.a)t:{var n,s=ht(n=a),o=n.a,c=s.a,h=void 0;if(v(o.b.a,c.b.a)){if(E(o.b.a,c.b.a,o.a)<0){n=!1;break t}ut(n).b=n.b=!0,h=N(o),y(c.b,h),h.d.c=n.d}else{if(0<E(c.b.a,o.b.a,c.a)){n=!1;break t}n.b=s.b=!0,h=N(c),y(o.e,c.b),h.b.d.c=n.d}n=!0}if(n&&(i.c?(w(i),b(r),r=(i=ht(a)).a):a.c&&(w(a),b(e),e=(a=ut(i)).a)),e.a!==r.a)if(e.b.a===r.b.a||a.c||i.c||e.b.a!==t.a&&r.b.a!==t.a)B(t,a);else if(j(t,a))break;e.a===r.a&&e.b.a===r.b.a&&(U(r,e),w(a),b(e),a=ut(i))}}function q(t,a){var i=new ct,e=s(t.b);e.a.b=I,e.a.a=a,e.b.a.b=-I,e.b.a.a=a,t.a=e.b.a,i.a=e,i.f=0,i.d=!1,i.c=!1,i.h=!0,i.b=!1,e=Y(e=t.f,e.a,i),i.e=e}function W(t){this.a=new F,this.b=t,this.c=h}function Y(t,a,i){for(;null!==(a=a.c).b&&!t.c(t.b,a.b,i););return t=new F(i,a.a,a),a.a.c=t,a.a=t}function F(t,a,i){this.b=t||null,this.a=a||this,this.c=i||this}function X(){this.d=0,this.p=this.b=this.q=null,this.j=[0,0,0],this.s=100130,this.n=!1,this.o=this.a=this.e=this.f=null,this.m=!1,this.c=this.r=this.i=this.k=this.l=this.h=null}function z(t,a){if(t.d!==a)for(;t.d!==a;)if(t.d<a)switch(t.d){case 0:H(t,100151),t.u(null);break;case 1:H(t,100152),t.t()}else switch(t.d){case 2:H(t,100154),t.v();break;case 1:H(t,100153),t.w()}}function H(t,a){t.p&&t.p(a,t.c)}function K(t,a){this.b=t||this,this.d=a||this,this.a=null,this.c=!1}function Q(){(this.h=this).i=this.d=this.a=this.e=this.c=this.b=null,this.f=0}function Z(){this.c=new J,this.a=new K,this.b=new Q,this.d=new Q,this.b.b=this.d,this.d.b=this.b}function J(t,a){this.e=t||this,this.f=a||this,this.d=this.c=null,this.g=[0,0,0],this.h=this.a=this.b=0}function $(){this.c=[],this.d=null,this.a=0,this.e=!1,this.b=new it}function tt(t,a){if(t.e){var i,e=t.b,r=++e.a;return 2*r>e.f&&(e.f*=2,e.c=et(e.c,e.f+1)),0===e.b?i=r:(i=e.b,e.b=e.c[e.b]),e.e[i]=a,e.c[i]=r,e.d[r]=i,e.h&&ot(e,r),i}return e=t.a++,t.c[e]=a,-(e+1)}function at(t){if(0===t.a)return nt(t.b);var a=t.c[t.d[t.a-1]];if(0!==t.b.a&&v(rt(t.b),a))return nt(t.b);for(;--t.a,0<t.a&&null===t.c[t.d[t.a-1]];);return a}function it(){this.d=et([0],33),this.e=[null,null],this.c=[0,0],this.a=0,this.f=32,this.b=0,this.h=!1,this.d[1]=1}function et(t,a){for(var i=Array(a),e=0;e<t.length;e++)i[e]=t[e];for(;e<a;e++)i[e]=0;return i}function rt(t){return t.e[t.d[1]]}function nt(t){var a=t.d,i=t.e,e=t.c,r=a[1],n=i[r];return 0<t.a&&(a[1]=a[t.a],e[a[1]]=1,i[r]=null,e[r]=t.b,t.b=r,0<--t.a&&st(t,1)),n}function st(t,a){for(var i=t.d,e=t.e,r=t.c,n=a,s=i[n];;){var o=n<<1;o<t.a&&v(e[i[o+1]],e[i[o]])&&(o+=1);var c=i[o];if(o>t.a||v(e[s],e[c])){r[i[n]=s]=n;break}r[i[n]=c]=n,n=o}}function ot(t,a){for(var i=t.d,e=t.e,r=t.c,n=a,s=i[n];;){var o=n>>1,c=i[o];if(0==o||v(e[c],e[s])){r[i[n]=s]=n;break}r[i[n]=c]=n,n=o}}function ct(){this.e=this.a=null,this.f=0,this.c=this.b=this.h=this.d=!1}function ht(t){return t.e.c.b}function ut(t){return t.e.a.b}(e=X.prototype).x=function(){z(this,0)},e.B=function(t,a){switch(t){case 100142:return;case 100140:switch(a){case 100130:case 100131:case 100132:case 100133:case 100134:return void(this.s=a)}break;case 100141:return void(this.m=!!a);default:return void H(this,100900)}H(this,100901)},e.y=function(t){switch(t){case 100142:return 0;case 100140:return this.s;case 100141:return this.m;default:H(this,100900)}return!1},e.A=function(t,a,i){this.j[0]=t,this.j[1]=a,this.j[2]=i},e.z=function(t,a){var i=a||null;switch(t){case 100100:case 100106:this.h=i;break;case 100104:case 100110:this.l=i;break;case 100101:case 100107:this.k=i;break;case 100102:case 100108:this.i=i;break;case 100103:case 100109:this.p=i;break;case 100105:case 100111:this.o=i;break;case 100112:this.r=i;break;default:H(this,100900)}},e.C=function(t,a){var i=!1,e=[0,0,0];z(this,2);for(var r=0;r<3;++r){var n=t[r];n<-1e150&&(n=-1e150,i=!0),1e150<n&&(n=1e150,i=!0),e[r]=n}i&&H(this,100155),null===(i=this.q)?y(i=s(this.b),i.b):(N(i),i=i.e),i.a.d=a,i.a.g[0]=e[0],i.a.g[1]=e[1],i.a.g[2]=e[2],i.f=1,i.b.f=-1,this.q=i},e.u=function(t){z(this,0),this.d=1,this.b=new Z,this.c=t},e.t=function(){z(this,1),this.d=2,this.q=null},e.v=function(){z(this,2),this.d=1},e.w=function(){z(this,1),this.d=0;var t,a,i=!1,e=[c=this.j[0],r=this.j[1],s=this.j[2]];if(0===c&&0===r&&0===s){for(var r=[-2e150,-2e150,-2e150],n=[2e150,2e150,2e150],s=[],o=[],c=(i=this.b.c).e;c!==i;c=c.e)for(var h=0;h<3;++h){var u=c.g[h];u<n[h]&&(n[h]=u,o[h]=c),u>r[h]&&(r[h]=u,s[h]=c)}if(r[1]-n[1]>r[c=0]-n[0]&&(c=1),n[c=r[2]-n[2]>r[c]-n[c]?2:c]>=r[c])e[0]=0,e[1]=0,e[2]=1;else{for(n=o[c],s=s[c],o=[r=0,0,0],n=[n.g[0]-s.g[0],n.g[1]-s.g[1],n.g[2]-s.g[2]],h=[0,0,0],c=i.e;c!==i;c=c.e)h[0]=c.g[0]-s.g[0],h[1]=c.g[1]-s.g[1],h[2]=c.g[2]-s.g[2],o[0]=n[1]*h[2]-n[2]*h[1],o[1]=n[2]*h[0]-n[0]*h[2],o[2]=n[0]*h[1]-n[1]*h[0],r<(u=o[0]*o[0]+o[1]*o[1]+o[2]*o[2])&&(r=u,e[0]=o[0],e[1]=o[1],e[2]=o[2]);r<=0&&(e[0]=e[1]=e[2]=0,e[m(n)]=1)}i=!0}for(o=m(e),c=this.b.c,r=(o+1)%3,s=(o+2)%3,o=0<e[o]?1:-1,e=c.e;e!==c;e=e.e)e.b=e.g[r],e.a=o*e.g[s];if(i){for(e=0,c=(i=this.b.a).b;c!==i;c=c.b)if(!((r=c.a).f<=0))for(;e+=(r.a.b-r.b.a.b)*(r.a.a+r.b.a.a),(r=r.e)!==c.a;);if(e<0)for(i=(e=this.b.c).e;i!==e;i=i.e)i.a=-i.a}for(this.n=!1,c=(e=this.b.b).h;c!==e;c=i)i=c.h,r=c.e,p(c.a,c.b.a)&&c.e.e!==c&&(C(this,r,c),b(c),r=(c=r).e),r.e===c&&(r!==c&&(r!==i&&r!==i.b||(i=i.h),b(r)),c!==i&&c!==i.b||(i=i.h),b(c));for(this.e=e=new $,c=(i=this.b.c).e;c!==i;c=c.e)c.h=tt(e,c);for(!function(t){t.d=[];for(var a=0;a<t.a;a++)t.d[a]=a;t.d.sort(function(i){return function(t,a){return v(i[t],i[a])?1:-1}}(t.c)),t.e=!0,function(t){for(var a=t.a;1<=a;--a)st(t,a);t.h=!0}(t.b)}(e),this.f=new W(this),q(this,-I),q(this,I);null!==(e=at(this.e));){for(;;){t:if(c=this.e,0===c.a)i=rt(c.b);else if(i=c.c[c.d[c.a-1]],0!==c.b.a&&(c=rt(c.b),v(c,i))){i=c;break t}if(null===i||!p(i,e))break;i=at(this.e),C(this,e.c,i.c)}!function t(a,i){for(var e,r=(a.a=i).c;null===r.i;)if((r=r.c)===i.c){var r=a,n=i;(u=new ct).a=n.c.b;for(var s=(o=r.f).a;null!==(s=s.a).b&&!o.c(o.b,u,s.b););var o,c,h=ht(o=s.b),u=o.a,s=h.a;return void(0===E(u.b.a,n,u.a)?p((u=o.a).a,n)||p(u.b.a,n)||(N(u.b),o.c&&(b(u.c),o.c=!1),y(n.c,u),t(r,n)):(c=v(s.b.a,u.b.a)?o:h,h=void 0,o.d||c.c?(h=c===o?f(n.c.b,u.e):f(s.b.c.b,n.c).b,c.c?O(c,h):((o=x(u=r,o,h)).f=ut(o).f+o.a.f,o.d=A(u,o.f)),t(r,n)):M(r,o,n.c,n.c,null,!0)))}o=(u=ht(r=k(r.i))).a,(u=D(a,u,null)).c===o?(u=(o=u).c,s=ht(r),h=r.a,c=s.a,e=!1,h.b.a!==c.b.a&&j(a,r),p(h.a,a.a)&&(y(u.b.e,h),u=ht(r=k(r)).a,D(a,ht(r),s),e=!0),p(c.a,a.a)&&(y(o,c.b.e),o=D(a,s,null),e=!0),e?M(a,r,o.c,u,u,!0):(n=v(c.a,h.a)?c.b.e:h,M(a,r,n=f(o.c.b,n),n.c,n.c,!1),n.b.i.c=!0,V(a,r))):M(a,r,u.c,o,o,!0)}(this,e)}for(this.a=this.f.a.a.b.a.a,e=0;null!==(i=this.f.a.a.b);)i.h||++e,w(i);for(this.f=null,(e=this.e).b=null,e.d=null,this.e=e.c=null,c=(e=this.b).a.b;c!==e.a;c=i)i=c.b,(c=c.a).e.e===c&&(U(c.c,c),b(c));if(!this.n){if(e=this.b,this.m)for(c=e.b.h;c!==e.b;c=i)i=c.h,c.b.d.c!==c.d.c?c.f=c.d.c?1:-1:b(c);else for(c=e.a.b;c!==e.a;c=i)if(i=c.b,c.c){for(c=c.a;v(c.b.a,c.a);c=c.c.b);for(;v(c.a,c.b.a);c=c.e);for(r=c.c.b,s=void 0;c.e!==r;)if(v(c.b.a,r.a)){for(;r.e!==c&&(v((a=r.e).b.a,a.a)||E(r.a,r.b.a,r.e.b.a)<=0);)r=(s=f(r.e,r)).b;r=r.c.b}else{for(;r.e!==c&&(v((t=c.c.b).a,t.b.a)||0<=E(c.b.a,c.a,c.c.b.a));)c=(s=f(c,c.c.b)).b;c=c.e}for(;r.e.e!==c;)r=(s=f(r.e,r)).b}if(this.h||this.i||this.k||this.l)if(this.m){for(i=(e=this.b).a.b;i!==e.a;i=i.b)if(i.c){for(this.h&&this.h(2,this.c),c=i.a;this.k&&this.k(c.a.d,this.c),(c=c.e)!==i.a;);this.i&&this.i(this.c)}}else{for(e=this.b,i=!!this.l,c=!1,r=-1,s=e.a.d;s!==e.a;s=s.d)if(s.c)for(c||(this.h&&this.h(4,this.c),c=!0),o=s.a;i&&(r!==(n=o.b.d.c?0:1)&&(r=n,this.l&&this.l(!!r,this.c))),this.k&&this.k(o.a.d,this.c),(o=o.e)!==s.a;);c&&this.i&&this.i(this.c)}if(this.r){for(c=(e=this.b).a.b;c!==e.a;c=i)if(i=c.b,!c.c){for(s=(r=c.a).e,o=void 0;s=(o=s).e,(o.d=null)===o.b.d&&(o.c===o?_(o.a,null):(o.a.c=o.c,l(o,o.b.e)),(n=o.b).c===n?_(n.a,null):(n.a.c=n.c,l(n,n.b.e)),d(o)),o!==r;);r=c.d,((c=c.b).d=r).b=c}return this.r(this.b),void(this.c=this.b=null)}}this.b=this.c=null},this.libtess={GluTesselator:X,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901,GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111}},X.prototype.gluDeleteTess=X.prototype.x,X.prototype.gluTessProperty=X.prototype.B,X.prototype.gluGetTessProperty=X.prototype.y,X.prototype.gluTessNormal=X.prototype.A,X.prototype.gluTessCallback=X.prototype.z,X.prototype.gluTessVertex=X.prototype.C,X.prototype.gluTessBeginPolygon=X.prototype.u,X.prototype.gluTessBeginContour=X.prototype.t,X.prototype.gluTessEndContour=X.prototype.v,X.prototype.gluTessEndPolygon=X.prototype.w,void 0!==a&&(a.exports=this.libtess)},{}],2:[function(t,a,i){"use strict";var r=new(t("./tessellator"));function n(){this.list=[],this.hash=Object.create(null)}function p(t,a){t=s(t),a=s(a);t!==a&&(t.rank<a.rank?t.parent=a:(a.parent=t).rank===a.rank&&(t.rank+=1))}function s(t){return t.parent!==t&&(t.parent=s(t.parent)),t.parent}function e(t,a,i){for(var e,r,n,s,o,c=(r=t,n=a[0]-r[0],r=a[1]-r[1],n*n+r*r),h=0;h<4;h++){if((s=N(t,a,t,i[h]))<=0)o=-1;else{if(!(c<=s))return;o=1}if(0===h)e=o;else if(o!==e)return}return 1}function v(t,a){return!(e(t[0],t[1],a)||e(t[1],t[2],a)||e(a[0],a[1],t)||e(a[1],a[2],t))}function N(t,a,i,e){return(a[0]-t[0])*(e[0]-i[0])+(a[1]-t[1])*(e[1]-i[1])}function o(t,a,i,e){var r=a[0]-t[0],n=a[1]-t[1],t=e[0]-i[0],e=e[1]-i[1],r=((a[0]-i[0])*n-r*(a[1]-i[1]))/(t*n-r*e);return[i[0]+r*t,i[1]+r*e]}n.prototype.push=function(t){this.hash[t]||(this.hash[t]=!0,this.list.push(t))},n.prototype.pop=function(){if(this.list.length){var t=this.list.pop();return delete this.hash[t],t}return null},a.exports=function(t,a,i,S){var G=a/2;S=Math.max(Math.PI,S||2*Math.PI);var d=t.vertices.map(function(t){return{coords:t,neighList:[]}}),L=t.edges.map(function(t,a){var i,e,r,n,s,o=t[0],c=t[1],h=d[o],u=d[c],e=(i=h.coords,e=u.coords,r=G,n=e[0]-i[0],s=e[1]-i[1],e=Math.sqrt(n*n+s*s),i=Math.acos(n/e),s<0&&(i*=-1),{angle:i,norm:e,dir:[n,s],ortho:[-r*s/e,r*n/e]});h.neighList.push({to:c,angle:e.angle,dir:e.dir,ortho:e.ortho,index:a}),u.neighList.push({to:o,angle:e.angle<=0?e.angle+Math.PI:e.angle-Math.PI,dir:[-e.dir[0],-e.dir[1]],ortho:[-e.ortho[0],-e.ortho[1]],index:a});t={rank:0,edge:t,points:{}};return t.points[c]={},t.points[o]={},t.parent=t}),y=[];d.forEach(function(t,v){var g=t.coords,E=t.neighList;E.sort(function(t,a){return t.angle-a.angle});var a,i,e,T=E.length;1===T?(a=E[0],i=[g[0]+a.ortho[0],g[1]+a.ortho[1]],e=[g[0]-a.ortho[0],g[1]-a.ortho[1]],(t=L[a.index].points)[v].first_vertex=a.index,t[v].last_vertex=a.index,t[v].first=i,t[v].remove_middle_first=!0,t[v].remove_middle_last=!0,t[v].last=e):E.forEach(function(t,a){var i=a===T-1,e=E[i?0:a+1],r=L[t.index].points,n=L[e.index].points;r[v].first_vertex=e.index,n[v].last_vertex=t.index;var s,o,c,h,u,b,f,l=[g[0]+t.ortho[0],g[1]+t.ortho[1]],d=[l[0]+t.dir[0],l[1]+t.dir[1]],_=[g[0]-e.ortho[0],g[1]-e.ortho[1]],p=[_[0]+e.dir[0],_[1]+e.dir[1]],s=(c=_,h=p,u=(o=d)[0]-(s=l)[0],a=o[1]-s[1],p=h[0]-c[0],d=h[1]-c[1],0==(h=p*a-u*d)?{point:s,valid:!0}:(h=((o[0]-c[0])*a-u*(o[1]-c[1]))/h,d=[c[0]+h*p,c[1]+h*d],1<h||N(o,d,o,s)<0?{point:d,valid:!1}:{point:d,valid:!0})),d=s.point;s.valid?((i?e.angle+2*Math.PI:e.angle)-t.angle>S?(r[v].first=l,n[v].last=_,b=[d[0]-g[0],d[1]-g[1]],f=1/Math.sqrt(b[0]*b[0]+b[1]*b[1]),r[v].miter_first=n[v].miter_last=[g[0]+G*b[0]*f,g[1]+G*b[1]*f]):(r[v].first=d,n[v].last=d),2===T&&(r[v].remove_middle_first=!0,n[v].remove_middle_last=!0)):(b=[d[0]-t.ortho[0],d[1]-t.ortho[1]],f=[d[0]+e.ortho[0],d[1]+e.ortho[1]],y.push({done:[t.index,e.index],todo:[v,t.to,e.to],rectangles:[[l,d,b,g],[_,d,f,g]]}),r[v].first=l,n[v].last=_)})}),L.forEach(function(t){var a,i,e=t.edge,r=e[0],n=e[1],s=t.points[r],e=t.points[n],r=d[r].coords,n=d[n].coords,t=t.polygon=[];N(s.last,e.first,r,n)<0?(a=s.last_vertex,i=e.first_vertex,p(L[a],L[i]),t.push(o(s.miter_last||r,s.last,e.first,e.miter_first||n))):t.push(s.last,e.first),e.miter_first&&t.push(e.miter_first),e.remove_middle_first&&e.remove_middle_last||t.push(n),e.miter_last&&t.push(e.miter_last),N(s.first,e.last,r,n)<0?(a=s.first_vertex,i=e.last_vertex,p(L[a],L[i]),t.push(o(s.first,s.miter_first||r,e.miter_last||n,e.last))):t.push(e.last,s.first),s.miter_first&&t.push(s.miter_first),s.remove_middle_first&&s.remove_middle_last||t.push(r),s.miter_last&&t.push(s.miter_last)});var _=Object.create(null);y.forEach(function(t){var c=Object.create(null),a=t.done[0],i=t.done[1],h=L[a],e=L[i];p(h,e),c[a]=!0,c[i]=!0;var u,b=new n;t.todo.forEach(function(t){b.push(t)});for(var f=t.rectangles[0],l=t.rectangles[1];null!==(u=b.pop());)d[u].neighList.forEach(function(t){var a,i,e,r,n,s,o=t.index;c[o]||(a=t.to,(s=_[o])||(i=d[u].coords,n=d[a].coords,e=[i[0]+t.ortho[0],i[1]+t.ortho[1]],r=[n[0]+t.ortho[0],n[1]+t.ortho[1]],n=[n[0]-t.ortho[0],n[1]-t.ortho[1]],t=[i[0]-t.ortho[0],i[1]-t.ortho[1]],s=_[o]=[e,r,n,t]),c[o]=!0,(v(s,f)||v(s,l))&&(p(h,L[o]),b.push(a)))})});var e=[];L.forEach(function(t,a){0<t.rank&&t.parent===t?(t.union=t.union||[],t.union.push(t.polygon),e.push(a)):t.parent===t?i(t.polygon):((a=s(t)).union=a.union||[],a.union.push(t.polygon))}),r._cb=i,e.forEach(function(t){r.run(L[t].union)}),delete r._cb}},{"./tessellator":3}],3:[function(t,a,i){"use strict";var e;try{e=t("libtess")}catch(t){if(void 0===window.libtess)throw new Error("libtess must be loaded before graph-draw");e=window.libtess}var r=e.GluTesselator,n=e.gluEnum,s=(e.primitiveType,n.GLU_TESS_BOUNDARY_ONLY),o=e.primitiveType.GL_LINE_LOOP;function c(){r.call(this),this.gluTessNormal(0,0,1),this.gluTessProperty(n.GLU_TESS_WINDING_RULE,e.windingRule.GLU_TESS_WINDING_POSITIVE),this.gluTessCallback(n.GLU_TESS_VERTEX_DATA,this._vertex),this.gluTessCallback(n.GLU_TESS_BEGIN,this._begin),this.gluTessCallback(n.GLU_TESS_END,this._end),this.gluTessCallback(n.GLU_TESS_ERROR,this._error),this.gluTessCallback(n.GLU_TESS_COMBINE,this._combine)}((c.prototype=Object.create(r.prototype)).constructor=c).prototype.run=function(t){var a=this;this.gluTessBeginPolygon(),t.forEach(function(t){a.gluTessBeginContour(),t.forEach(function(t){a.gluTessVertex([t[0],t[1],0],t)}),a.gluTessEndContour()}),this.gluTessProperty(s,!0),this._output=[],this.gluTessEndPolygon(),this.gluTessBeginPolygon(),this._output.forEach(function(t){a.gluTessBeginContour(),t.forEach(function(t){a.gluTessVertex([t[0],t[1],0],t)}),a.gluTessEndContour()}),this.gluTessProperty(s,!1),this.gluTessEndPolygon()},c.prototype.clean=function(){this._accu=[],this._output=[]},c.prototype._begin=function(t){this._primitiveType=t,this._accu=[]},c.prototype._vertex=function(t){this._accu.push(t)},c.prototype._error=function(t){console.error("libtess error: "+t)},c.prototype._combine=function(t){return[t[0],t[1]]},c.prototype._end=function(){if(this._primitiveType===o)this._output.push(this._accu);else for(var t=0;t<this._accu.length;t+=3)this._cb([this._accu[t],this._accu[t+1],this._accu[t+2]])},a.exports=c},{libtess:1}]},{},[2])(2)});